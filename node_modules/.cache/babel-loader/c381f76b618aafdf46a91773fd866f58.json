{"ast":null,"code":"import _toConsumableArray from \"/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport ElButton from '../el-button';\nimport ElButtonGroup from '../el-button-group';\nimport { useLocaleInject } from '../hooks';\nimport { defineComponent, ref, computed, openBlock, createBlock, Fragment, renderList, toDisplayString, createCommentVNode, createVNode, renderSlot, resolveComponent, withCtx, createTextVNode, createSlots } from 'vue';\nimport dayjs from 'dayjs';\nimport localeData from 'dayjs/plugin/localeData';\nimport { rangeArr } from '../el-time-picker';\ndayjs.extend(localeData);\n\nvar getPrevMonthLastDays = function getPrevMonthLastDays(date, amount) {\n  var lastDay = date.subtract(1, \"month\").endOf(\"month\").date();\n  return rangeArr(amount).map(function (_, index) {\n    return lastDay - (amount - index - 1);\n  });\n};\n\nvar getMonthDays = function getMonthDays(date) {\n  var days = date.daysInMonth();\n  return rangeArr(days).map(function (_, index) {\n    return index + 1;\n  });\n};\n\nvar script = defineComponent({\n  props: {\n    selectedDay: {\n      type: Object\n    },\n    range: {\n      type: Array\n    },\n    date: {\n      type: Object\n    },\n    hideHeader: {\n      type: Boolean\n    }\n  },\n  emits: [\"pick\"],\n  setup: function setup(props, ctx) {\n    var _useLocaleInject = useLocaleInject(),\n        lang = _useLocaleInject.lang;\n\n    var WEEK_DAYS = ref(dayjs().locale(lang.value).localeData().weekdaysShort());\n    var now = dayjs().locale(lang.value);\n    var firstDayOfWeek = now.$locale().weekStart || 0;\n\n    var toNestedArr = function toNestedArr(days) {\n      return rangeArr(days.length / 7).map(function (_, index) {\n        var start = index * 7;\n        return days.slice(start, start + 7);\n      });\n    };\n\n    var getFormattedDate = function getFormattedDate(day, type) {\n      var result;\n\n      if (type === \"prev\") {\n        result = props.date.startOf(\"month\").subtract(1, \"month\").date(day);\n      } else if (type === \"next\") {\n        result = props.date.startOf(\"month\").add(1, \"month\").date(day);\n      } else {\n        result = props.date.date(day);\n      }\n\n      return result;\n    };\n\n    var getCellClass = function getCellClass(_ref) {\n      var text = _ref.text,\n          type = _ref.type;\n      var classes = [type];\n\n      if (type === \"current\") {\n        var date_ = getFormattedDate(text, type);\n\n        if (date_.isSame(props.selectedDay, \"day\")) {\n          classes.push(\"is-selected\");\n        }\n\n        if (date_.isSame(now, \"day\")) {\n          classes.push(\"is-today\");\n        }\n      }\n\n      return classes;\n    };\n\n    var pickDay = function pickDay(_ref2) {\n      var text = _ref2.text,\n          type = _ref2.type;\n      var date = getFormattedDate(text, type);\n      ctx.emit(\"pick\", date);\n    };\n\n    var getSlotData = function getSlotData(_ref3) {\n      var text = _ref3.text,\n          type = _ref3.type;\n      var day = getFormattedDate(text, type);\n      return {\n        isSelected: day.isSame(props.selectedDay),\n        type: \"\".concat(type, \"-month\"),\n        day: day.format(\"YYYY-MM-DD\"),\n        date: day.toDate()\n      };\n    };\n\n    var isInRange = computed(function () {\n      return props.range && props.range.length;\n    });\n    var rows = computed(function () {\n      var days = [];\n\n      if (isInRange.value) {\n        var _props$range = _slicedToArray(props.range, 2),\n            start = _props$range[0],\n            end = _props$range[1];\n\n        var currentMonthRange = rangeArr(end.date() - start.date() + 1).map(function (_, index) {\n          return {\n            text: start.date() + index,\n            type: \"current\"\n          };\n        });\n        var remaining = currentMonthRange.length % 7;\n        remaining = remaining === 0 ? 0 : 7 - remaining;\n        var nextMonthRange = rangeArr(remaining).map(function (_, index) {\n          return {\n            text: index + 1,\n            type: \"next\"\n          };\n        });\n        days = currentMonthRange.concat(nextMonthRange);\n      } else {\n        var firstDay = props.date.startOf(\"month\").day() || 7;\n        var prevMonthDays = getPrevMonthLastDays(props.date, firstDay - firstDayOfWeek).map(function (day) {\n          return {\n            text: day,\n            type: \"prev\"\n          };\n        });\n        var currentMonthDays = getMonthDays(props.date).map(function (day) {\n          return {\n            text: day,\n            type: \"current\"\n          };\n        });\n        days = [].concat(_toConsumableArray(prevMonthDays), _toConsumableArray(currentMonthDays));\n        var nextMonthDays = rangeArr(42 - days.length).map(function (_, index) {\n          return {\n            text: index + 1,\n            type: \"next\"\n          };\n        });\n        days = days.concat(nextMonthDays);\n      }\n\n      return toNestedArr(days);\n    });\n    var weekDays = computed(function () {\n      var start = firstDayOfWeek;\n\n      if (start === 0) {\n        return WEEK_DAYS.value;\n      } else {\n        return WEEK_DAYS.value.slice(start).concat(WEEK_DAYS.value.slice(0, start));\n      }\n    });\n    return {\n      isInRange: isInRange,\n      weekDays: weekDays,\n      rows: rows,\n      getCellClass: getCellClass,\n      pickDay: pickDay,\n      getSlotData: getSlotData\n    };\n  }\n});\nvar _hoisted_1 = {\n  key: 0\n};\nvar _hoisted_2 = {\n  class: \"el-calendar-day\"\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"table\", {\n    class: {\n      \"el-calendar-table\": true,\n      \"is-range\": _ctx.isInRange\n    },\n    cellspacing: \"0\",\n    cellpadding: \"0\"\n  }, [!_ctx.hideHeader ? (openBlock(), createBlock(\"thead\", _hoisted_1, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.weekDays, function (day) {\n    return openBlock(), createBlock(\"th\", {\n      key: day\n    }, toDisplayString(day), 1);\n  }), 128))])) : createCommentVNode(\"v-if\", true), createVNode(\"tbody\", null, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.rows, function (row, index) {\n    return openBlock(), createBlock(\"tr\", {\n      key: index,\n      class: {\n        \"el-calendar-table__row\": true,\n        \"el-calendar-table__row--hide-border\": index === 0 && _ctx.hideHeader\n      }\n    }, [(openBlock(true), createBlock(Fragment, null, renderList(row, function (cell, key) {\n      return openBlock(), createBlock(\"td\", {\n        key: key,\n        class: _ctx.getCellClass(cell),\n        onClick: function onClick($event) {\n          return _ctx.pickDay(cell);\n        }\n      }, [createVNode(\"div\", _hoisted_2, [renderSlot(_ctx.$slots, \"dateCell\", {\n        data: _ctx.getSlotData(cell)\n      }, function () {\n        return [createVNode(\"span\", null, toDisplayString(cell.text), 1)];\n      })])], 10, [\"onClick\"]);\n    }), 128))], 2);\n  }), 128))])], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/calendar/src/date-table.vue\";\nvar script$1 = defineComponent({\n  name: \"ElCalendar\",\n  components: {\n    DateTable: script,\n    ElButton: ElButton,\n    ElButtonGroup: ElButtonGroup\n  },\n  props: {\n    modelValue: {\n      type: Date\n    },\n    range: {\n      type: Array,\n      validator: function validator(range) {\n        if (Array.isArray(range)) {\n          return range.length === 2 && range.every(function (item) {\n            return item instanceof Date;\n          });\n        }\n\n        return false;\n      }\n    }\n  },\n  emits: [\"input\", \"update:modelValue\"],\n  setup: function setup(props, ctx) {\n    var _useLocaleInject2 = useLocaleInject(),\n        t = _useLocaleInject2.t,\n        lang = _useLocaleInject2.lang;\n\n    var selectedDay = ref(null);\n    var now = dayjs().locale(lang.value);\n    var prevMonthDayjs = computed(function () {\n      return date.value.subtract(1, \"month\");\n    });\n    var curMonthDatePrefix = computed(function () {\n      return dayjs(date.value).locale(lang.value).format(\"YYYY-MM\");\n    });\n    var nextMonthDayjs = computed(function () {\n      return date.value.add(1, \"month\");\n    });\n    var i18nDate = computed(function () {\n      var pickedMonth = \"el.datepicker.month\".concat(date.value.format(\"M\"));\n      return \"\".concat(date.value.year(), \" \").concat(t(\"el.datepicker.year\"), \" \").concat(t(pickedMonth));\n    });\n    var realSelectedDay = computed({\n      get: function get() {\n        if (!props.modelValue) return selectedDay.value;\n        return date.value;\n      },\n      set: function set(val) {\n        selectedDay.value = val;\n        var result = val.toDate();\n        ctx.emit(\"input\", result);\n        ctx.emit(\"update:modelValue\", result);\n      }\n    });\n    var date = computed(function () {\n      if (!props.modelValue) {\n        if (realSelectedDay.value) {\n          return realSelectedDay.value;\n        } else if (validatedRange.value.length) {\n          return validatedRange.value[0][0];\n        }\n\n        return now;\n      } else {\n        return dayjs(props.modelValue).locale(lang.value);\n      }\n    });\n    var validatedRange = computed(function () {\n      if (!props.range) return [];\n      var rangeArrDayjs = props.range.map(function (_) {\n        return dayjs(_).locale(lang.value);\n      });\n\n      var _rangeArrDayjs = _slicedToArray(rangeArrDayjs, 2),\n          startDayjs = _rangeArrDayjs[0],\n          endDayjs = _rangeArrDayjs[1];\n\n      if (startDayjs.isAfter(endDayjs)) {\n        console.warn(\"[ElementCalendar]end time should be greater than start time\");\n        return [];\n      }\n\n      if (startDayjs.isSame(endDayjs, \"month\")) {\n        return [[startDayjs.startOf(\"week\"), endDayjs.endOf(\"week\")]];\n      } else {\n        if (startDayjs.add(1, \"month\").month() !== endDayjs.month()) {\n          console.warn(\"[ElementCalendar]start time and end time interval must not exceed two months\");\n          return [];\n        }\n\n        var endMonthFirstDay = endDayjs.startOf(\"month\");\n        var endMonthFirstWeekDay = endMonthFirstDay.startOf(\"week\");\n        var endMonthStart = endMonthFirstDay;\n\n        if (!endMonthFirstDay.isSame(endMonthFirstWeekDay, \"month\")) {\n          endMonthStart = endMonthFirstDay.endOf(\"week\").add(1, \"day\");\n        }\n\n        return [[startDayjs.startOf(\"week\"), startDayjs.endOf(\"month\")], [endMonthStart, endDayjs.endOf(\"week\")]];\n      }\n    });\n\n    var pickDay = function pickDay(day) {\n      realSelectedDay.value = day;\n    };\n\n    var selectDate = function selectDate(type) {\n      var day;\n\n      if (type === \"prev-month\") {\n        day = prevMonthDayjs.value;\n      } else if (type === \"next-month\") {\n        day = nextMonthDayjs.value;\n      } else {\n        day = now;\n      }\n\n      if (day.isSame(date.value, \"day\")) return;\n      pickDay(day);\n    };\n\n    return {\n      selectedDay: selectedDay,\n      curMonthDatePrefix: curMonthDatePrefix,\n      i18nDate: i18nDate,\n      realSelectedDay: realSelectedDay,\n      date: date,\n      validatedRange: validatedRange,\n      pickDay: pickDay,\n      selectDate: selectDate,\n      t: t\n    };\n  }\n});\nvar _hoisted_1$1 = {\n  class: \"el-calendar\"\n};\nvar _hoisted_2$1 = {\n  class: \"el-calendar__header\"\n};\nvar _hoisted_3 = {\n  class: \"el-calendar__title\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  class: \"el-calendar__button-group\"\n};\nvar _hoisted_5 = {\n  key: 0,\n  class: \"el-calendar__body\"\n};\nvar _hoisted_6 = {\n  key: 1,\n  class: \"el-calendar__body\"\n};\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_button = resolveComponent(\"el-button\");\n\n  var _component_el_button_group = resolveComponent(\"el-button-group\");\n\n  var _component_date_table = resolveComponent(\"date-table\");\n\n  return openBlock(), createBlock(\"div\", _hoisted_1$1, [createVNode(\"div\", _hoisted_2$1, [createVNode(\"div\", _hoisted_3, toDisplayString(_ctx.i18nDate), 1), _ctx.validatedRange.length === 0 ? (openBlock(), createBlock(\"div\", _hoisted_4, [createVNode(_component_el_button_group, null, {\n    default: withCtx(function () {\n      return [createVNode(_component_el_button, {\n        size: \"mini\",\n        onClick: _cache[1] || (_cache[1] = function ($event) {\n          return _ctx.selectDate(\"prev-month\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.prevMonth\")), 1)];\n        }),\n        _: 1\n      }), createVNode(_component_el_button, {\n        size: \"mini\",\n        onClick: _cache[2] || (_cache[2] = function ($event) {\n          return _ctx.selectDate(\"today\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.today\")), 1)];\n        }),\n        _: 1\n      }), createVNode(_component_el_button, {\n        size: \"mini\",\n        onClick: _cache[3] || (_cache[3] = function ($event) {\n          return _ctx.selectDate(\"next-month\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.nextMonth\")), 1)];\n        }),\n        _: 1\n      })];\n    }),\n    _: 1\n  })])) : createCommentVNode(\"v-if\", true)]), _ctx.validatedRange.length === 0 ? (openBlock(), createBlock(\"div\", _hoisted_5, [createVNode(_component_date_table, {\n    date: _ctx.date,\n    \"selected-day\": _ctx.realSelectedDay,\n    onPick: _ctx.pickDay\n  }, createSlots({\n    _: 2\n  }, [_ctx.$slots.dateCell ? {\n    name: \"dateCell\",\n    fn: withCtx(function (data) {\n      return [renderSlot(_ctx.$slots, \"dateCell\", data)];\n    })\n  } : void 0]), 1032, [\"date\", \"selected-day\", \"onPick\"])])) : (openBlock(), createBlock(\"div\", _hoisted_6, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.validatedRange, function (range_, index) {\n    return openBlock(), createBlock(_component_date_table, {\n      key: index,\n      date: range_[0],\n      \"selected-day\": _ctx.realSelectedDay,\n      range: range_,\n      \"hide-header\": index !== 0,\n      onPick: _ctx.pickDay\n    }, createSlots({\n      _: 2\n    }, [_ctx.$slots.dateCell ? {\n      name: \"dateCell\",\n      fn: withCtx(function (data) {\n        return [renderSlot(_ctx.$slots, \"dateCell\", data)];\n      })\n    } : void 0]), 1032, [\"date\", \"selected-day\", \"range\", \"hide-header\", \"onPick\"]);\n  }), 128))]))]);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/calendar/src/index.vue\";\n\nscript$1.install = function (app) {\n  app.component(script$1.name, script$1);\n};\n\nvar _Calendar = script$1;\nexport default _Calendar;","map":{"version":3,"sources":["/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/element-plus/es/el-calendar/index.js"],"names":["ElButton","ElButtonGroup","useLocaleInject","defineComponent","ref","computed","openBlock","createBlock","Fragment","renderList","toDisplayString","createCommentVNode","createVNode","renderSlot","resolveComponent","withCtx","createTextVNode","createSlots","dayjs","localeData","rangeArr","extend","getPrevMonthLastDays","date","amount","lastDay","subtract","endOf","map","_","index","getMonthDays","days","daysInMonth","script","props","selectedDay","type","Object","range","Array","hideHeader","Boolean","emits","setup","ctx","lang","WEEK_DAYS","locale","value","weekdaysShort","now","firstDayOfWeek","$locale","weekStart","toNestedArr","length","start","slice","getFormattedDate","day","result","startOf","add","getCellClass","text","classes","date_","isSame","push","pickDay","emit","getSlotData","isSelected","format","toDate","isInRange","rows","end","currentMonthRange","remaining","nextMonthRange","concat","firstDay","prevMonthDays","currentMonthDays","nextMonthDays","weekDays","_hoisted_1","key","_hoisted_2","class","render","_ctx","_cache","$props","$setup","$data","$options","cellspacing","cellpadding","row","cell","onClick","$event","$slots","data","__file","script$1","name","components","DateTable","modelValue","Date","validator","isArray","every","item","t","prevMonthDayjs","curMonthDatePrefix","nextMonthDayjs","i18nDate","pickedMonth","year","realSelectedDay","get","set","val","validatedRange","rangeArrDayjs","startDayjs","endDayjs","isAfter","console","warn","month","endMonthFirstDay","endMonthFirstWeekDay","endMonthStart","selectDate","_hoisted_1$1","_hoisted_2$1","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","render$1","_component_el_button","_component_el_button_group","_component_date_table","default","size","onPick","dateCell","fn","range_","install","app","component","_Calendar"],"mappings":";;;;;;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,SAASC,eAAT,QAAgC,UAAhC;AACA,SAASC,eAAT,EAA0BC,GAA1B,EAA+BC,QAA/B,EAAyCC,SAAzC,EAAoDC,WAApD,EAAiEC,QAAjE,EAA2EC,UAA3E,EAAuFC,eAAvF,EAAwGC,kBAAxG,EAA4HC,WAA5H,EAAyIC,UAAzI,EAAqJC,gBAArJ,EAAuKC,OAAvK,EAAgLC,eAAhL,EAAiMC,WAAjM,QAAoN,KAApN;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AAEAF,KAAK,CAACG,MAAN,CAAaF,UAAb;;AACA,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,IAAD,EAAOC,MAAP,EAAkB;AAC7C,MAAMC,OAAO,GAAGF,IAAI,CAACG,QAAL,CAAc,CAAd,EAAiB,OAAjB,EAA0BC,KAA1B,CAAgC,OAAhC,EAAyCJ,IAAzC,EAAhB;AACA,SAAOH,QAAQ,CAACI,MAAD,CAAR,CAAiBI,GAAjB,CAAqB,UAACC,CAAD,EAAIC,KAAJ;AAAA,WAAcL,OAAO,IAAID,MAAM,GAAGM,KAAT,GAAiB,CAArB,CAArB;AAAA,GAArB,CAAP;AACD,CAHD;;AAIA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACR,IAAD,EAAU;AAC7B,MAAMS,IAAI,GAAGT,IAAI,CAACU,WAAL,EAAb;AACA,SAAOb,QAAQ,CAACY,IAAD,CAAR,CAAeJ,GAAf,CAAmB,UAACC,CAAD,EAAIC,KAAJ;AAAA,WAAcA,KAAK,GAAG,CAAtB;AAAA,GAAnB,CAAP;AACD,CAHD;;AAIA,IAAII,MAAM,GAAG/B,eAAe,CAAC;AAC3BgC,EAAAA,KAAK,EAAE;AACLC,IAAAA,WAAW,EAAE;AACXC,MAAAA,IAAI,EAAEC;AADK,KADR;AAILC,IAAAA,KAAK,EAAE;AACLF,MAAAA,IAAI,EAAEG;AADD,KAJF;AAOLjB,IAAAA,IAAI,EAAE;AACJc,MAAAA,IAAI,EAAEC;AADF,KAPD;AAULG,IAAAA,UAAU,EAAE;AACVJ,MAAAA,IAAI,EAAEK;AADI;AAVP,GADoB;AAe3BC,EAAAA,KAAK,EAAE,CAAC,MAAD,CAfoB;AAgB3BC,EAAAA,KAhB2B,iBAgBrBT,KAhBqB,EAgBdU,GAhBc,EAgBT;AAChB,2BAAiB3C,eAAe,EAAhC;AAAA,QAAQ4C,IAAR,oBAAQA,IAAR;;AACA,QAAMC,SAAS,GAAG3C,GAAG,CAACc,KAAK,GAAG8B,MAAR,CAAeF,IAAI,CAACG,KAApB,EAA2B9B,UAA3B,GAAwC+B,aAAxC,EAAD,CAArB;AACA,QAAMC,GAAG,GAAGjC,KAAK,GAAG8B,MAAR,CAAeF,IAAI,CAACG,KAApB,CAAZ;AACA,QAAMG,cAAc,GAAGD,GAAG,CAACE,OAAJ,GAAcC,SAAd,IAA2B,CAAlD;;AACA,QAAMC,WAAW,GAAG,SAAdA,WAAc,CAACvB,IAAD,EAAU;AAC5B,aAAOZ,QAAQ,CAACY,IAAI,CAACwB,MAAL,GAAc,CAAf,CAAR,CAA0B5B,GAA1B,CAA8B,UAACC,CAAD,EAAIC,KAAJ,EAAc;AACjD,YAAM2B,KAAK,GAAG3B,KAAK,GAAG,CAAtB;AACA,eAAOE,IAAI,CAAC0B,KAAL,CAAWD,KAAX,EAAkBA,KAAK,GAAG,CAA1B,CAAP;AACD,OAHM,CAAP;AAID,KALD;;AAMA,QAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAMvB,IAAN,EAAe;AACtC,UAAIwB,MAAJ;;AACA,UAAIxB,IAAI,KAAK,MAAb,EAAqB;AACnBwB,QAAAA,MAAM,GAAG1B,KAAK,CAACZ,IAAN,CAAWuC,OAAX,CAAmB,OAAnB,EAA4BpC,QAA5B,CAAqC,CAArC,EAAwC,OAAxC,EAAiDH,IAAjD,CAAsDqC,GAAtD,CAAT;AACD,OAFD,MAEO,IAAIvB,IAAI,KAAK,MAAb,EAAqB;AAC1BwB,QAAAA,MAAM,GAAG1B,KAAK,CAACZ,IAAN,CAAWuC,OAAX,CAAmB,OAAnB,EAA4BC,GAA5B,CAAgC,CAAhC,EAAmC,OAAnC,EAA4CxC,IAA5C,CAAiDqC,GAAjD,CAAT;AACD,OAFM,MAEA;AACLC,QAAAA,MAAM,GAAG1B,KAAK,CAACZ,IAAN,CAAWA,IAAX,CAAgBqC,GAAhB,CAAT;AACD;;AACD,aAAOC,MAAP;AACD,KAVD;;AAWA,QAAMG,YAAY,GAAG,SAAfA,YAAe,OAAoB;AAAA,UAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,UAAX5B,IAAW,QAAXA,IAAW;AACvC,UAAM6B,OAAO,GAAG,CAAC7B,IAAD,CAAhB;;AACA,UAAIA,IAAI,KAAK,SAAb,EAAwB;AACtB,YAAM8B,KAAK,GAAGR,gBAAgB,CAACM,IAAD,EAAO5B,IAAP,CAA9B;;AACA,YAAI8B,KAAK,CAACC,MAAN,CAAajC,KAAK,CAACC,WAAnB,EAAgC,KAAhC,CAAJ,EAA4C;AAC1C8B,UAAAA,OAAO,CAACG,IAAR,CAAa,aAAb;AACD;;AACD,YAAIF,KAAK,CAACC,MAAN,CAAajB,GAAb,EAAkB,KAAlB,CAAJ,EAA8B;AAC5Be,UAAAA,OAAO,CAACG,IAAR,CAAa,UAAb;AACD;AACF;;AACD,aAAOH,OAAP;AACD,KAZD;;AAaA,QAAMI,OAAO,GAAG,SAAVA,OAAU,QAAoB;AAAA,UAAjBL,IAAiB,SAAjBA,IAAiB;AAAA,UAAX5B,IAAW,SAAXA,IAAW;AAClC,UAAMd,IAAI,GAAGoC,gBAAgB,CAACM,IAAD,EAAO5B,IAAP,CAA7B;AACAQ,MAAAA,GAAG,CAAC0B,IAAJ,CAAS,MAAT,EAAiBhD,IAAjB;AACD,KAHD;;AAIA,QAAMiD,WAAW,GAAG,SAAdA,WAAc,QAAoB;AAAA,UAAjBP,IAAiB,SAAjBA,IAAiB;AAAA,UAAX5B,IAAW,SAAXA,IAAW;AACtC,UAAMuB,GAAG,GAAGD,gBAAgB,CAACM,IAAD,EAAO5B,IAAP,CAA5B;AACA,aAAO;AACLoC,QAAAA,UAAU,EAAEb,GAAG,CAACQ,MAAJ,CAAWjC,KAAK,CAACC,WAAjB,CADP;AAELC,QAAAA,IAAI,YAAKA,IAAL,WAFC;AAGLuB,QAAAA,GAAG,EAAEA,GAAG,CAACc,MAAJ,CAAW,YAAX,CAHA;AAILnD,QAAAA,IAAI,EAAEqC,GAAG,CAACe,MAAJ;AAJD,OAAP;AAMD,KARD;;AASA,QAAMC,SAAS,GAAGvE,QAAQ,CAAC,YAAM;AAC/B,aAAO8B,KAAK,CAACI,KAAN,IAAeJ,KAAK,CAACI,KAAN,CAAYiB,MAAlC;AACD,KAFyB,CAA1B;AAGA,QAAMqB,IAAI,GAAGxE,QAAQ,CAAC,YAAM;AAC1B,UAAI2B,IAAI,GAAG,EAAX;;AACA,UAAI4C,SAAS,CAAC3B,KAAd,EAAqB;AACnB,0CAAqBd,KAAK,CAACI,KAA3B;AAAA,YAAOkB,KAAP;AAAA,YAAcqB,GAAd;;AACA,YAAMC,iBAAiB,GAAG3D,QAAQ,CAAC0D,GAAG,CAACvD,IAAJ,KAAakC,KAAK,CAAClC,IAAN,EAAb,GAA4B,CAA7B,CAAR,CAAwCK,GAAxC,CAA4C,UAACC,CAAD,EAAIC,KAAJ;AAAA,iBAAe;AACnFmC,YAAAA,IAAI,EAAER,KAAK,CAAClC,IAAN,KAAeO,KAD8D;AAEnFO,YAAAA,IAAI,EAAE;AAF6E,WAAf;AAAA,SAA5C,CAA1B;AAIA,YAAI2C,SAAS,GAAGD,iBAAiB,CAACvB,MAAlB,GAA2B,CAA3C;AACAwB,QAAAA,SAAS,GAAGA,SAAS,KAAK,CAAd,GAAkB,CAAlB,GAAsB,IAAIA,SAAtC;AACA,YAAMC,cAAc,GAAG7D,QAAQ,CAAC4D,SAAD,CAAR,CAAoBpD,GAApB,CAAwB,UAACC,CAAD,EAAIC,KAAJ;AAAA,iBAAe;AAC5DmC,YAAAA,IAAI,EAAEnC,KAAK,GAAG,CAD8C;AAE5DO,YAAAA,IAAI,EAAE;AAFsD,WAAf;AAAA,SAAxB,CAAvB;AAIAL,QAAAA,IAAI,GAAG+C,iBAAiB,CAACG,MAAlB,CAAyBD,cAAzB,CAAP;AACD,OAbD,MAaO;AACL,YAAME,QAAQ,GAAGhD,KAAK,CAACZ,IAAN,CAAWuC,OAAX,CAAmB,OAAnB,EAA4BF,GAA5B,MAAqC,CAAtD;AACA,YAAMwB,aAAa,GAAG9D,oBAAoB,CAACa,KAAK,CAACZ,IAAP,EAAa4D,QAAQ,GAAG/B,cAAxB,CAApB,CAA4DxB,GAA5D,CAAgE,UAACgC,GAAD;AAAA,iBAAU;AAC9FK,YAAAA,IAAI,EAAEL,GADwF;AAE9FvB,YAAAA,IAAI,EAAE;AAFwF,WAAV;AAAA,SAAhE,CAAtB;AAIA,YAAMgD,gBAAgB,GAAGtD,YAAY,CAACI,KAAK,CAACZ,IAAP,CAAZ,CAAyBK,GAAzB,CAA6B,UAACgC,GAAD;AAAA,iBAAU;AAC9DK,YAAAA,IAAI,EAAEL,GADwD;AAE9DvB,YAAAA,IAAI,EAAE;AAFwD,WAAV;AAAA,SAA7B,CAAzB;AAIAL,QAAAA,IAAI,gCAAOoD,aAAP,sBAAyBC,gBAAzB,EAAJ;AACA,YAAMC,aAAa,GAAGlE,QAAQ,CAAC,KAAKY,IAAI,CAACwB,MAAX,CAAR,CAA2B5B,GAA3B,CAA+B,UAACC,CAAD,EAAIC,KAAJ;AAAA,iBAAe;AAClEmC,YAAAA,IAAI,EAAEnC,KAAK,GAAG,CADoD;AAElEO,YAAAA,IAAI,EAAE;AAF4D,WAAf;AAAA,SAA/B,CAAtB;AAIAL,QAAAA,IAAI,GAAGA,IAAI,CAACkD,MAAL,CAAYI,aAAZ,CAAP;AACD;;AACD,aAAO/B,WAAW,CAACvB,IAAD,CAAlB;AACD,KAjCoB,CAArB;AAkCA,QAAMuD,QAAQ,GAAGlF,QAAQ,CAAC,YAAM;AAC9B,UAAMoD,KAAK,GAAGL,cAAd;;AACA,UAAIK,KAAK,KAAK,CAAd,EAAiB;AACf,eAAOV,SAAS,CAACE,KAAjB;AACD,OAFD,MAEO;AACL,eAAOF,SAAS,CAACE,KAAV,CAAgBS,KAAhB,CAAsBD,KAAtB,EAA6ByB,MAA7B,CAAoCnC,SAAS,CAACE,KAAV,CAAgBS,KAAhB,CAAsB,CAAtB,EAAyBD,KAAzB,CAApC,CAAP;AACD;AACF,KAPwB,CAAzB;AAQA,WAAO;AACLmB,MAAAA,SAAS,EAATA,SADK;AAELW,MAAAA,QAAQ,EAARA,QAFK;AAGLV,MAAAA,IAAI,EAAJA,IAHK;AAILb,MAAAA,YAAY,EAAZA,YAJK;AAKLM,MAAAA,OAAO,EAAPA,OALK;AAMLE,MAAAA,WAAW,EAAXA;AANK,KAAP;AAQD;AArH0B,CAAD,CAA5B;AAwHA,IAAMgB,UAAU,GAAG;AAAEC,EAAAA,GAAG,EAAE;AAAP,CAAnB;AACA,IAAMC,UAAU,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAnB;;AACA,SAASC,MAAT,CAAgBC,IAAhB,EAAsBC,MAAtB,EAA8BC,MAA9B,EAAsCC,MAAtC,EAA8CC,KAA9C,EAAqDC,QAArD,EAA+D;AAC7D,SAAO5F,SAAS,IAAIC,WAAW,CAAC,OAAD,EAAU;AACvCoF,IAAAA,KAAK,EAAE;AACL,2BAAqB,IADhB;AAEL,kBAAYE,IAAI,CAACjB;AAFZ,KADgC;AAKvCuB,IAAAA,WAAW,EAAE,GAL0B;AAMvCC,IAAAA,WAAW,EAAE;AAN0B,GAAV,EAO5B,CACD,CAACP,IAAI,CAACpD,UAAN,IAAoBnC,SAAS,IAAIC,WAAW,CAAC,OAAD,EAAUiF,UAAV,EAAsB,EAC/DlF,SAAS,CAAC,IAAD,CAAT,EAAiBC,WAAW,CAACC,QAAD,EAAW,IAAX,EAAiBC,UAAU,CAACoF,IAAI,CAACN,QAAN,EAAgB,UAAC3B,GAAD,EAAS;AAC/E,WAAOtD,SAAS,IAAIC,WAAW,CAAC,IAAD,EAAO;AAAEkF,MAAAA,GAAG,EAAE7B;AAAP,KAAP,EAAqBlD,eAAe,CAACkD,GAAD,CAApC,EAA2C,CAA3C,CAA/B;AACD,GAFuD,CAA3B,EAEzB,GAFyB,CADmC,EAAtB,CAA5C,IAIMjD,kBAAkB,CAAC,MAAD,EAAS,IAAT,CALvB,EAMDC,WAAW,CAAC,OAAD,EAAU,IAAV,EAAgB,EACxBN,SAAS,CAAC,IAAD,CAAT,EAAiBC,WAAW,CAACC,QAAD,EAAW,IAAX,EAAiBC,UAAU,CAACoF,IAAI,CAAChB,IAAN,EAAY,UAACwB,GAAD,EAAMvE,KAAN,EAAgB;AAClF,WAAOxB,SAAS,IAAIC,WAAW,CAAC,IAAD,EAAO;AACpCkF,MAAAA,GAAG,EAAE3D,KAD+B;AAEpC6D,MAAAA,KAAK,EAAE;AACL,kCAA0B,IADrB;AAEL,+CAAuC7D,KAAK,KAAK,CAAV,IAAe+D,IAAI,CAACpD;AAFtD;AAF6B,KAAP,EAM5B,EACAnC,SAAS,CAAC,IAAD,CAAT,EAAiBC,WAAW,CAACC,QAAD,EAAW,IAAX,EAAiBC,UAAU,CAAC4F,GAAD,EAAM,UAACC,IAAD,EAAOb,GAAP,EAAe;AAC3E,aAAOnF,SAAS,IAAIC,WAAW,CAAC,IAAD,EAAO;AACpCkF,QAAAA,GAAG,EAAHA,GADoC;AAEpCE,QAAAA,KAAK,EAAEE,IAAI,CAAC7B,YAAL,CAAkBsC,IAAlB,CAF6B;AAGpCC,QAAAA,OAAO,EAAE,iBAACC,MAAD;AAAA,iBAAYX,IAAI,CAACvB,OAAL,CAAagC,IAAb,CAAZ;AAAA;AAH2B,OAAP,EAI5B,CACD1F,WAAW,CAAC,KAAD,EAAQ8E,UAAR,EAAoB,CAC7B7E,UAAU,CAACgF,IAAI,CAACY,MAAN,EAAc,UAAd,EAA0B;AAClCC,QAAAA,IAAI,EAAEb,IAAI,CAACrB,WAAL,CAAiB8B,IAAjB;AAD4B,OAA1B,EAEP;AAAA,eAAM,CACP1F,WAAW,CAAC,MAAD,EAAS,IAAT,EAAeF,eAAe,CAAC4F,IAAI,CAACrC,IAAN,CAA9B,EAA2C,CAA3C,CADJ,CAAN;AAAA,OAFO,CADmB,CAApB,CADV,CAJ4B,EAY5B,EAZ4B,EAYxB,CAAC,SAAD,CAZwB,CAA/B;AAaD,KAduD,CAA3B,EAczB,GAdyB,CAD5B,EAN4B,EAsB5B,CAtB4B,CAA/B;AAuBD,GAxBuD,CAA3B,EAwBzB,GAxByB,CADJ,EAAhB,CANV,CAP4B,EAwC5B,CAxC4B,CAA/B;AAyCD;;AAED/B,MAAM,CAAC0D,MAAP,GAAgBA,MAAhB;AACA1D,MAAM,CAACyE,MAAP,GAAgB,sCAAhB;AAEA,IAAIC,QAAQ,GAAGzG,eAAe,CAAC;AAC7B0G,EAAAA,IAAI,EAAE,YADuB;AAE7BC,EAAAA,UAAU,EAAE;AACVC,IAAAA,SAAS,EAAE7E,MADD;AAEVlC,IAAAA,QAAQ,EAARA,QAFU;AAGVC,IAAAA,aAAa,EAAbA;AAHU,GAFiB;AAO7BkC,EAAAA,KAAK,EAAE;AACL6E,IAAAA,UAAU,EAAE;AACV3E,MAAAA,IAAI,EAAE4E;AADI,KADP;AAIL1E,IAAAA,KAAK,EAAE;AACLF,MAAAA,IAAI,EAAEG,KADD;AAEL0E,MAAAA,SAAS,EAAE,mBAAC3E,KAAD,EAAW;AACpB,YAAIC,KAAK,CAAC2E,OAAN,CAAc5E,KAAd,CAAJ,EAA0B;AACxB,iBAAOA,KAAK,CAACiB,MAAN,KAAiB,CAAjB,IAAsBjB,KAAK,CAAC6E,KAAN,CAAY,UAACC,IAAD;AAAA,mBAAUA,IAAI,YAAYJ,IAA1B;AAAA,WAAZ,CAA7B;AACD;;AACD,eAAO,KAAP;AACD;AAPI;AAJF,GAPsB;AAqB7BtE,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,mBAAV,CArBsB;AAsB7BC,EAAAA,KAtB6B,iBAsBvBT,KAtBuB,EAsBhBU,GAtBgB,EAsBX;AAChB,4BAAoB3C,eAAe,EAAnC;AAAA,QAAQoH,CAAR,qBAAQA,CAAR;AAAA,QAAWxE,IAAX,qBAAWA,IAAX;;AACA,QAAMV,WAAW,GAAGhC,GAAG,CAAC,IAAD,CAAvB;AACA,QAAM+C,GAAG,GAAGjC,KAAK,GAAG8B,MAAR,CAAeF,IAAI,CAACG,KAApB,CAAZ;AACA,QAAMsE,cAAc,GAAGlH,QAAQ,CAAC,YAAM;AACpC,aAAOkB,IAAI,CAAC0B,KAAL,CAAWvB,QAAX,CAAoB,CAApB,EAAuB,OAAvB,CAAP;AACD,KAF8B,CAA/B;AAGA,QAAM8F,kBAAkB,GAAGnH,QAAQ,CAAC,YAAM;AACxC,aAAOa,KAAK,CAACK,IAAI,CAAC0B,KAAN,CAAL,CAAkBD,MAAlB,CAAyBF,IAAI,CAACG,KAA9B,EAAqCyB,MAArC,CAA4C,SAA5C,CAAP;AACD,KAFkC,CAAnC;AAGA,QAAM+C,cAAc,GAAGpH,QAAQ,CAAC,YAAM;AACpC,aAAOkB,IAAI,CAAC0B,KAAL,CAAWc,GAAX,CAAe,CAAf,EAAkB,OAAlB,CAAP;AACD,KAF8B,CAA/B;AAGA,QAAM2D,QAAQ,GAAGrH,QAAQ,CAAC,YAAM;AAC9B,UAAMsH,WAAW,gCAAyBpG,IAAI,CAAC0B,KAAL,CAAWyB,MAAX,CAAkB,GAAlB,CAAzB,CAAjB;AACA,uBAAUnD,IAAI,CAAC0B,KAAL,CAAW2E,IAAX,EAAV,cAA+BN,CAAC,CAAC,oBAAD,CAAhC,cAA0DA,CAAC,CAACK,WAAD,CAA3D;AACD,KAHwB,CAAzB;AAIA,QAAME,eAAe,GAAGxH,QAAQ,CAAC;AAC/ByH,MAAAA,GAD+B,iBACzB;AACJ,YAAI,CAAC3F,KAAK,CAAC6E,UAAX,EACE,OAAO5E,WAAW,CAACa,KAAnB;AACF,eAAO1B,IAAI,CAAC0B,KAAZ;AACD,OAL8B;AAM/B8E,MAAAA,GAN+B,eAM3BC,GAN2B,EAMtB;AACP5F,QAAAA,WAAW,CAACa,KAAZ,GAAoB+E,GAApB;AACA,YAAMnE,MAAM,GAAGmE,GAAG,CAACrD,MAAJ,EAAf;AACA9B,QAAAA,GAAG,CAAC0B,IAAJ,CAAS,OAAT,EAAkBV,MAAlB;AACAhB,QAAAA,GAAG,CAAC0B,IAAJ,CAAS,mBAAT,EAA8BV,MAA9B;AACD;AAX8B,KAAD,CAAhC;AAaA,QAAMtC,IAAI,GAAGlB,QAAQ,CAAC,YAAM;AAC1B,UAAI,CAAC8B,KAAK,CAAC6E,UAAX,EAAuB;AACrB,YAAIa,eAAe,CAAC5E,KAApB,EAA2B;AACzB,iBAAO4E,eAAe,CAAC5E,KAAvB;AACD,SAFD,MAEO,IAAIgF,cAAc,CAAChF,KAAf,CAAqBO,MAAzB,EAAiC;AACtC,iBAAOyE,cAAc,CAAChF,KAAf,CAAqB,CAArB,EAAwB,CAAxB,CAAP;AACD;;AACD,eAAOE,GAAP;AACD,OAPD,MAOO;AACL,eAAOjC,KAAK,CAACiB,KAAK,CAAC6E,UAAP,CAAL,CAAwBhE,MAAxB,CAA+BF,IAAI,CAACG,KAApC,CAAP;AACD;AACF,KAXoB,CAArB;AAYA,QAAMgF,cAAc,GAAG5H,QAAQ,CAAC,YAAM;AACpC,UAAI,CAAC8B,KAAK,CAACI,KAAX,EACE,OAAO,EAAP;AACF,UAAM2F,aAAa,GAAG/F,KAAK,CAACI,KAAN,CAAYX,GAAZ,CAAgB,UAACC,CAAD;AAAA,eAAOX,KAAK,CAACW,CAAD,CAAL,CAASmB,MAAT,CAAgBF,IAAI,CAACG,KAArB,CAAP;AAAA,OAAhB,CAAtB;;AACA,0CAA+BiF,aAA/B;AAAA,UAAOC,UAAP;AAAA,UAAmBC,QAAnB;;AACA,UAAID,UAAU,CAACE,OAAX,CAAmBD,QAAnB,CAAJ,EAAkC;AAChCE,QAAAA,OAAO,CAACC,IAAR,CAAa,6DAAb;AACA,eAAO,EAAP;AACD;;AACD,UAAIJ,UAAU,CAAC/D,MAAX,CAAkBgE,QAAlB,EAA4B,OAA5B,CAAJ,EAA0C;AACxC,eAAO,CAAC,CACND,UAAU,CAACrE,OAAX,CAAmB,MAAnB,CADM,EAENsE,QAAQ,CAACzG,KAAT,CAAe,MAAf,CAFM,CAAD,CAAP;AAID,OALD,MAKO;AACL,YAAIwG,UAAU,CAACpE,GAAX,CAAe,CAAf,EAAkB,OAAlB,EAA2ByE,KAA3B,OAAuCJ,QAAQ,CAACI,KAAT,EAA3C,EAA6D;AAC3DF,UAAAA,OAAO,CAACC,IAAR,CAAa,8EAAb;AACA,iBAAO,EAAP;AACD;;AACD,YAAME,gBAAgB,GAAGL,QAAQ,CAACtE,OAAT,CAAiB,OAAjB,CAAzB;AACA,YAAM4E,oBAAoB,GAAGD,gBAAgB,CAAC3E,OAAjB,CAAyB,MAAzB,CAA7B;AACA,YAAI6E,aAAa,GAAGF,gBAApB;;AACA,YAAI,CAACA,gBAAgB,CAACrE,MAAjB,CAAwBsE,oBAAxB,EAA8C,OAA9C,CAAL,EAA6D;AAC3DC,UAAAA,aAAa,GAAGF,gBAAgB,CAAC9G,KAAjB,CAAuB,MAAvB,EAA+BoC,GAA/B,CAAmC,CAAnC,EAAsC,KAAtC,CAAhB;AACD;;AACD,eAAO,CACL,CACEoE,UAAU,CAACrE,OAAX,CAAmB,MAAnB,CADF,EAEEqE,UAAU,CAACxG,KAAX,CAAiB,OAAjB,CAFF,CADK,EAKL,CACEgH,aADF,EAEEP,QAAQ,CAACzG,KAAT,CAAe,MAAf,CAFF,CALK,CAAP;AAUD;AACF,KApC8B,CAA/B;;AAqCA,QAAM2C,OAAO,GAAG,SAAVA,OAAU,CAACV,GAAD,EAAS;AACvBiE,MAAAA,eAAe,CAAC5E,KAAhB,GAAwBW,GAAxB;AACD,KAFD;;AAGA,QAAMgF,UAAU,GAAG,SAAbA,UAAa,CAACvG,IAAD,EAAU;AAC3B,UAAIuB,GAAJ;;AACA,UAAIvB,IAAI,KAAK,YAAb,EAA2B;AACzBuB,QAAAA,GAAG,GAAG2D,cAAc,CAACtE,KAArB;AACD,OAFD,MAEO,IAAIZ,IAAI,KAAK,YAAb,EAA2B;AAChCuB,QAAAA,GAAG,GAAG6D,cAAc,CAACxE,KAArB;AACD,OAFM,MAEA;AACLW,QAAAA,GAAG,GAAGT,GAAN;AACD;;AACD,UAAIS,GAAG,CAACQ,MAAJ,CAAW7C,IAAI,CAAC0B,KAAhB,EAAuB,KAAvB,CAAJ,EACE;AACFqB,MAAAA,OAAO,CAACV,GAAD,CAAP;AACD,KAZD;;AAaA,WAAO;AACLxB,MAAAA,WAAW,EAAXA,WADK;AAELoF,MAAAA,kBAAkB,EAAlBA,kBAFK;AAGLE,MAAAA,QAAQ,EAARA,QAHK;AAILG,MAAAA,eAAe,EAAfA,eAJK;AAKLtG,MAAAA,IAAI,EAAJA,IALK;AAML0G,MAAAA,cAAc,EAAdA,cANK;AAOL3D,MAAAA,OAAO,EAAPA,OAPK;AAQLsE,MAAAA,UAAU,EAAVA,UARK;AASLtB,MAAAA,CAAC,EAADA;AATK,KAAP;AAWD;AAhI4B,CAAD,CAA9B;AAmIA,IAAMuB,YAAY,GAAG;AAAElD,EAAAA,KAAK,EAAE;AAAT,CAArB;AACA,IAAMmD,YAAY,GAAG;AAAEnD,EAAAA,KAAK,EAAE;AAAT,CAArB;AACA,IAAMoD,UAAU,GAAG;AAAEpD,EAAAA,KAAK,EAAE;AAAT,CAAnB;AACA,IAAMqD,UAAU,GAAG;AACjBvD,EAAAA,GAAG,EAAE,CADY;AAEjBE,EAAAA,KAAK,EAAE;AAFU,CAAnB;AAIA,IAAMsD,UAAU,GAAG;AACjBxD,EAAAA,GAAG,EAAE,CADY;AAEjBE,EAAAA,KAAK,EAAE;AAFU,CAAnB;AAIA,IAAMuD,UAAU,GAAG;AACjBzD,EAAAA,GAAG,EAAE,CADY;AAEjBE,EAAAA,KAAK,EAAE;AAFU,CAAnB;;AAIA,SAASwD,QAAT,CAAkBtD,IAAlB,EAAwBC,MAAxB,EAAgCC,MAAhC,EAAwCC,MAAxC,EAAgDC,KAAhD,EAAuDC,QAAvD,EAAiE;AAC/D,MAAMkD,oBAAoB,GAAGtI,gBAAgB,CAAC,WAAD,CAA7C;;AACA,MAAMuI,0BAA0B,GAAGvI,gBAAgB,CAAC,iBAAD,CAAnD;;AACA,MAAMwI,qBAAqB,GAAGxI,gBAAgB,CAAC,YAAD,CAA9C;;AACA,SAAOR,SAAS,IAAIC,WAAW,CAAC,KAAD,EAAQsI,YAAR,EAAsB,CACnDjI,WAAW,CAAC,KAAD,EAAQkI,YAAR,EAAsB,CAC/BlI,WAAW,CAAC,KAAD,EAAQmI,UAAR,EAAoBrI,eAAe,CAACmF,IAAI,CAAC6B,QAAN,CAAnC,EAAoD,CAApD,CADoB,EAE/B7B,IAAI,CAACoC,cAAL,CAAoBzE,MAApB,KAA+B,CAA/B,IAAoClD,SAAS,IAAIC,WAAW,CAAC,KAAD,EAAQyI,UAAR,EAAoB,CAC9EpI,WAAW,CAACyI,0BAAD,EAA6B,IAA7B,EAAmC;AAC5CE,IAAAA,OAAO,EAAExI,OAAO,CAAC;AAAA,aAAM,CACrBH,WAAW,CAACwI,oBAAD,EAAuB;AAChCI,QAAAA,IAAI,EAAE,MAD0B;AAEhCjD,QAAAA,OAAO,EAAET,MAAM,CAAC,CAAD,CAAN,KAAcA,MAAM,CAAC,CAAD,CAAN,GAAY,UAACU,MAAD;AAAA,iBAAYX,IAAI,CAAC+C,UAAL,CAAgB,YAAhB,CAAZ;AAAA,SAA1B;AAFuB,OAAvB,EAGR;AACDW,QAAAA,OAAO,EAAExI,OAAO,CAAC;AAAA,iBAAM,CACrBC,eAAe,CAACN,eAAe,CAACmF,IAAI,CAACyB,CAAL,CAAO,yBAAP,CAAD,CAAhB,EAAqD,CAArD,CADM,CAAN;AAAA,SAAD,CADf;AAIDzF,QAAAA,CAAC,EAAE;AAJF,OAHQ,CADU,EAUrBjB,WAAW,CAACwI,oBAAD,EAAuB;AAChCI,QAAAA,IAAI,EAAE,MAD0B;AAEhCjD,QAAAA,OAAO,EAAET,MAAM,CAAC,CAAD,CAAN,KAAcA,MAAM,CAAC,CAAD,CAAN,GAAY,UAACU,MAAD;AAAA,iBAAYX,IAAI,CAAC+C,UAAL,CAAgB,OAAhB,CAAZ;AAAA,SAA1B;AAFuB,OAAvB,EAGR;AACDW,QAAAA,OAAO,EAAExI,OAAO,CAAC;AAAA,iBAAM,CACrBC,eAAe,CAACN,eAAe,CAACmF,IAAI,CAACyB,CAAL,CAAO,qBAAP,CAAD,CAAhB,EAAiD,CAAjD,CADM,CAAN;AAAA,SAAD,CADf;AAIDzF,QAAAA,CAAC,EAAE;AAJF,OAHQ,CAVU,EAmBrBjB,WAAW,CAACwI,oBAAD,EAAuB;AAChCI,QAAAA,IAAI,EAAE,MAD0B;AAEhCjD,QAAAA,OAAO,EAAET,MAAM,CAAC,CAAD,CAAN,KAAcA,MAAM,CAAC,CAAD,CAAN,GAAY,UAACU,MAAD;AAAA,iBAAYX,IAAI,CAAC+C,UAAL,CAAgB,YAAhB,CAAZ;AAAA,SAA1B;AAFuB,OAAvB,EAGR;AACDW,QAAAA,OAAO,EAAExI,OAAO,CAAC;AAAA,iBAAM,CACrBC,eAAe,CAACN,eAAe,CAACmF,IAAI,CAACyB,CAAL,CAAO,yBAAP,CAAD,CAAhB,EAAqD,CAArD,CADM,CAAN;AAAA,SAAD,CADf;AAIDzF,QAAAA,CAAC,EAAE;AAJF,OAHQ,CAnBU,CAAN;AAAA,KAAD,CAD4B;AA8B5CA,IAAAA,CAAC,EAAE;AA9ByC,GAAnC,CADmE,CAApB,CAA5D,IAiCMlB,kBAAkB,CAAC,MAAD,EAAS,IAAT,CAnCO,CAAtB,CADwC,EAsCnDkF,IAAI,CAACoC,cAAL,CAAoBzE,MAApB,KAA+B,CAA/B,IAAoClD,SAAS,IAAIC,WAAW,CAAC,KAAD,EAAQ0I,UAAR,EAAoB,CAC9ErI,WAAW,CAAC0I,qBAAD,EAAwB;AACjC/H,IAAAA,IAAI,EAAEsE,IAAI,CAACtE,IADsB;AAEjC,oBAAgBsE,IAAI,CAACgC,eAFY;AAGjC4B,IAAAA,MAAM,EAAE5D,IAAI,CAACvB;AAHoB,GAAxB,EAIRrD,WAAW,CAAC;AAAEY,IAAAA,CAAC,EAAE;AAAL,GAAD,EAAW,CACvBgE,IAAI,CAACY,MAAL,CAAYiD,QAAZ,GAAuB;AACrB7C,IAAAA,IAAI,EAAE,UADe;AAErB8C,IAAAA,EAAE,EAAE5I,OAAO,CAAC,UAAC2F,IAAD;AAAA,aAAU,CACpB7F,UAAU,CAACgF,IAAI,CAACY,MAAN,EAAc,UAAd,EAA0BC,IAA1B,CADU,CAAV;AAAA,KAAD;AAFU,GAAvB,GAKI,KAAK,CANc,CAAX,CAJH,EAWP,IAXO,EAWD,CAAC,MAAD,EAAS,cAAT,EAAyB,QAAzB,CAXC,CADmE,CAApB,CAA5D,KAaOpG,SAAS,IAAIC,WAAW,CAAC,KAAD,EAAQ2I,UAAR,EAAoB,EAChD5I,SAAS,CAAC,IAAD,CAAT,EAAiBC,WAAW,CAACC,QAAD,EAAW,IAAX,EAAiBC,UAAU,CAACoF,IAAI,CAACoC,cAAN,EAAsB,UAAC2B,MAAD,EAAS9H,KAAT,EAAmB;AAC/F,WAAOxB,SAAS,IAAIC,WAAW,CAAC+I,qBAAD,EAAwB;AACrD7D,MAAAA,GAAG,EAAE3D,KADgD;AAErDP,MAAAA,IAAI,EAAEqI,MAAM,CAAC,CAAD,CAFyC;AAGrD,sBAAgB/D,IAAI,CAACgC,eAHgC;AAIrDtF,MAAAA,KAAK,EAAEqH,MAJ8C;AAKrD,qBAAe9H,KAAK,KAAK,CAL4B;AAMrD2H,MAAAA,MAAM,EAAE5D,IAAI,CAACvB;AANwC,KAAxB,EAO5BrD,WAAW,CAAC;AAAEY,MAAAA,CAAC,EAAE;AAAL,KAAD,EAAW,CACvBgE,IAAI,CAACY,MAAL,CAAYiD,QAAZ,GAAuB;AACrB7C,MAAAA,IAAI,EAAE,UADe;AAErB8C,MAAAA,EAAE,EAAE5I,OAAO,CAAC,UAAC2F,IAAD;AAAA,eAAU,CACpB7F,UAAU,CAACgF,IAAI,CAACY,MAAN,EAAc,UAAd,EAA0BC,IAA1B,CADU,CAAV;AAAA,OAAD;AAFU,KAAvB,GAKI,KAAK,CANc,CAAX,CAPiB,EAc3B,IAd2B,EAcrB,CAAC,MAAD,EAAS,cAAT,EAAyB,OAAzB,EAAkC,aAAlC,EAAiD,QAAjD,CAdqB,CAA/B;AAeD,GAhBuD,CAA3B,EAgBzB,GAhByB,CADoB,EAApB,CAb/B,CAtCmD,CAAtB,CAA/B;AAuED;;AAEDE,QAAQ,CAAChB,MAAT,GAAkBuD,QAAlB;AACAvC,QAAQ,CAACD,MAAT,GAAkB,iCAAlB;;AAEAC,QAAQ,CAACiD,OAAT,GAAmB,UAACC,GAAD,EAAS;AAC1BA,EAAAA,GAAG,CAACC,SAAJ,CAAcnD,QAAQ,CAACC,IAAvB,EAA6BD,QAA7B;AACD,CAFD;;AAGA,IAAMoD,SAAS,GAAGpD,QAAlB;AAEA,eAAeoD,SAAf","sourcesContent":["import ElButton from '../el-button';\nimport ElButtonGroup from '../el-button-group';\nimport { useLocaleInject } from '../hooks';\nimport { defineComponent, ref, computed, openBlock, createBlock, Fragment, renderList, toDisplayString, createCommentVNode, createVNode, renderSlot, resolveComponent, withCtx, createTextVNode, createSlots } from 'vue';\nimport dayjs from 'dayjs';\nimport localeData from 'dayjs/plugin/localeData';\nimport { rangeArr } from '../el-time-picker';\n\ndayjs.extend(localeData);\nconst getPrevMonthLastDays = (date, amount) => {\n  const lastDay = date.subtract(1, \"month\").endOf(\"month\").date();\n  return rangeArr(amount).map((_, index) => lastDay - (amount - index - 1));\n};\nconst getMonthDays = (date) => {\n  const days = date.daysInMonth();\n  return rangeArr(days).map((_, index) => index + 1);\n};\nvar script = defineComponent({\n  props: {\n    selectedDay: {\n      type: Object\n    },\n    range: {\n      type: Array\n    },\n    date: {\n      type: Object\n    },\n    hideHeader: {\n      type: Boolean\n    }\n  },\n  emits: [\"pick\"],\n  setup(props, ctx) {\n    const { lang } = useLocaleInject();\n    const WEEK_DAYS = ref(dayjs().locale(lang.value).localeData().weekdaysShort());\n    const now = dayjs().locale(lang.value);\n    const firstDayOfWeek = now.$locale().weekStart || 0;\n    const toNestedArr = (days) => {\n      return rangeArr(days.length / 7).map((_, index) => {\n        const start = index * 7;\n        return days.slice(start, start + 7);\n      });\n    };\n    const getFormattedDate = (day, type) => {\n      let result;\n      if (type === \"prev\") {\n        result = props.date.startOf(\"month\").subtract(1, \"month\").date(day);\n      } else if (type === \"next\") {\n        result = props.date.startOf(\"month\").add(1, \"month\").date(day);\n      } else {\n        result = props.date.date(day);\n      }\n      return result;\n    };\n    const getCellClass = ({ text, type }) => {\n      const classes = [type];\n      if (type === \"current\") {\n        const date_ = getFormattedDate(text, type);\n        if (date_.isSame(props.selectedDay, \"day\")) {\n          classes.push(\"is-selected\");\n        }\n        if (date_.isSame(now, \"day\")) {\n          classes.push(\"is-today\");\n        }\n      }\n      return classes;\n    };\n    const pickDay = ({ text, type }) => {\n      const date = getFormattedDate(text, type);\n      ctx.emit(\"pick\", date);\n    };\n    const getSlotData = ({ text, type }) => {\n      const day = getFormattedDate(text, type);\n      return {\n        isSelected: day.isSame(props.selectedDay),\n        type: `${type}-month`,\n        day: day.format(\"YYYY-MM-DD\"),\n        date: day.toDate()\n      };\n    };\n    const isInRange = computed(() => {\n      return props.range && props.range.length;\n    });\n    const rows = computed(() => {\n      let days = [];\n      if (isInRange.value) {\n        const [start, end] = props.range;\n        const currentMonthRange = rangeArr(end.date() - start.date() + 1).map((_, index) => ({\n          text: start.date() + index,\n          type: \"current\"\n        }));\n        let remaining = currentMonthRange.length % 7;\n        remaining = remaining === 0 ? 0 : 7 - remaining;\n        const nextMonthRange = rangeArr(remaining).map((_, index) => ({\n          text: index + 1,\n          type: \"next\"\n        }));\n        days = currentMonthRange.concat(nextMonthRange);\n      } else {\n        const firstDay = props.date.startOf(\"month\").day() || 7;\n        const prevMonthDays = getPrevMonthLastDays(props.date, firstDay - firstDayOfWeek).map((day) => ({\n          text: day,\n          type: \"prev\"\n        }));\n        const currentMonthDays = getMonthDays(props.date).map((day) => ({\n          text: day,\n          type: \"current\"\n        }));\n        days = [...prevMonthDays, ...currentMonthDays];\n        const nextMonthDays = rangeArr(42 - days.length).map((_, index) => ({\n          text: index + 1,\n          type: \"next\"\n        }));\n        days = days.concat(nextMonthDays);\n      }\n      return toNestedArr(days);\n    });\n    const weekDays = computed(() => {\n      const start = firstDayOfWeek;\n      if (start === 0) {\n        return WEEK_DAYS.value;\n      } else {\n        return WEEK_DAYS.value.slice(start).concat(WEEK_DAYS.value.slice(0, start));\n      }\n    });\n    return {\n      isInRange,\n      weekDays,\n      rows,\n      getCellClass,\n      pickDay,\n      getSlotData\n    };\n  }\n});\n\nconst _hoisted_1 = { key: 0 };\nconst _hoisted_2 = { class: \"el-calendar-day\" };\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"table\", {\n    class: {\n      \"el-calendar-table\": true,\n      \"is-range\": _ctx.isInRange\n    },\n    cellspacing: \"0\",\n    cellpadding: \"0\"\n  }, [\n    !_ctx.hideHeader ? (openBlock(), createBlock(\"thead\", _hoisted_1, [\n      (openBlock(true), createBlock(Fragment, null, renderList(_ctx.weekDays, (day) => {\n        return openBlock(), createBlock(\"th\", { key: day }, toDisplayString(day), 1);\n      }), 128))\n    ])) : createCommentVNode(\"v-if\", true),\n    createVNode(\"tbody\", null, [\n      (openBlock(true), createBlock(Fragment, null, renderList(_ctx.rows, (row, index) => {\n        return openBlock(), createBlock(\"tr\", {\n          key: index,\n          class: {\n            \"el-calendar-table__row\": true,\n            \"el-calendar-table__row--hide-border\": index === 0 && _ctx.hideHeader\n          }\n        }, [\n          (openBlock(true), createBlock(Fragment, null, renderList(row, (cell, key) => {\n            return openBlock(), createBlock(\"td\", {\n              key,\n              class: _ctx.getCellClass(cell),\n              onClick: ($event) => _ctx.pickDay(cell)\n            }, [\n              createVNode(\"div\", _hoisted_2, [\n                renderSlot(_ctx.$slots, \"dateCell\", {\n                  data: _ctx.getSlotData(cell)\n                }, () => [\n                  createVNode(\"span\", null, toDisplayString(cell.text), 1)\n                ])\n              ])\n            ], 10, [\"onClick\"]);\n          }), 128))\n        ], 2);\n      }), 128))\n    ])\n  ], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/calendar/src/date-table.vue\";\n\nvar script$1 = defineComponent({\n  name: \"ElCalendar\",\n  components: {\n    DateTable: script,\n    ElButton,\n    ElButtonGroup\n  },\n  props: {\n    modelValue: {\n      type: Date\n    },\n    range: {\n      type: Array,\n      validator: (range) => {\n        if (Array.isArray(range)) {\n          return range.length === 2 && range.every((item) => item instanceof Date);\n        }\n        return false;\n      }\n    }\n  },\n  emits: [\"input\", \"update:modelValue\"],\n  setup(props, ctx) {\n    const { t, lang } = useLocaleInject();\n    const selectedDay = ref(null);\n    const now = dayjs().locale(lang.value);\n    const prevMonthDayjs = computed(() => {\n      return date.value.subtract(1, \"month\");\n    });\n    const curMonthDatePrefix = computed(() => {\n      return dayjs(date.value).locale(lang.value).format(\"YYYY-MM\");\n    });\n    const nextMonthDayjs = computed(() => {\n      return date.value.add(1, \"month\");\n    });\n    const i18nDate = computed(() => {\n      const pickedMonth = `el.datepicker.month${date.value.format(\"M\")}`;\n      return `${date.value.year()} ${t(\"el.datepicker.year\")} ${t(pickedMonth)}`;\n    });\n    const realSelectedDay = computed({\n      get() {\n        if (!props.modelValue)\n          return selectedDay.value;\n        return date.value;\n      },\n      set(val) {\n        selectedDay.value = val;\n        const result = val.toDate();\n        ctx.emit(\"input\", result);\n        ctx.emit(\"update:modelValue\", result);\n      }\n    });\n    const date = computed(() => {\n      if (!props.modelValue) {\n        if (realSelectedDay.value) {\n          return realSelectedDay.value;\n        } else if (validatedRange.value.length) {\n          return validatedRange.value[0][0];\n        }\n        return now;\n      } else {\n        return dayjs(props.modelValue).locale(lang.value);\n      }\n    });\n    const validatedRange = computed(() => {\n      if (!props.range)\n        return [];\n      const rangeArrDayjs = props.range.map((_) => dayjs(_).locale(lang.value));\n      const [startDayjs, endDayjs] = rangeArrDayjs;\n      if (startDayjs.isAfter(endDayjs)) {\n        console.warn(\"[ElementCalendar]end time should be greater than start time\");\n        return [];\n      }\n      if (startDayjs.isSame(endDayjs, \"month\")) {\n        return [[\n          startDayjs.startOf(\"week\"),\n          endDayjs.endOf(\"week\")\n        ]];\n      } else {\n        if (startDayjs.add(1, \"month\").month() !== endDayjs.month()) {\n          console.warn(\"[ElementCalendar]start time and end time interval must not exceed two months\");\n          return [];\n        }\n        const endMonthFirstDay = endDayjs.startOf(\"month\");\n        const endMonthFirstWeekDay = endMonthFirstDay.startOf(\"week\");\n        let endMonthStart = endMonthFirstDay;\n        if (!endMonthFirstDay.isSame(endMonthFirstWeekDay, \"month\")) {\n          endMonthStart = endMonthFirstDay.endOf(\"week\").add(1, \"day\");\n        }\n        return [\n          [\n            startDayjs.startOf(\"week\"),\n            startDayjs.endOf(\"month\")\n          ],\n          [\n            endMonthStart,\n            endDayjs.endOf(\"week\")\n          ]\n        ];\n      }\n    });\n    const pickDay = (day) => {\n      realSelectedDay.value = day;\n    };\n    const selectDate = (type) => {\n      let day;\n      if (type === \"prev-month\") {\n        day = prevMonthDayjs.value;\n      } else if (type === \"next-month\") {\n        day = nextMonthDayjs.value;\n      } else {\n        day = now;\n      }\n      if (day.isSame(date.value, \"day\"))\n        return;\n      pickDay(day);\n    };\n    return {\n      selectedDay,\n      curMonthDatePrefix,\n      i18nDate,\n      realSelectedDay,\n      date,\n      validatedRange,\n      pickDay,\n      selectDate,\n      t\n    };\n  }\n});\n\nconst _hoisted_1$1 = { class: \"el-calendar\" };\nconst _hoisted_2$1 = { class: \"el-calendar__header\" };\nconst _hoisted_3 = { class: \"el-calendar__title\" };\nconst _hoisted_4 = {\n  key: 0,\n  class: \"el-calendar__button-group\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"el-calendar__body\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"el-calendar__body\"\n};\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = resolveComponent(\"el-button\");\n  const _component_el_button_group = resolveComponent(\"el-button-group\");\n  const _component_date_table = resolveComponent(\"date-table\");\n  return openBlock(), createBlock(\"div\", _hoisted_1$1, [\n    createVNode(\"div\", _hoisted_2$1, [\n      createVNode(\"div\", _hoisted_3, toDisplayString(_ctx.i18nDate), 1),\n      _ctx.validatedRange.length === 0 ? (openBlock(), createBlock(\"div\", _hoisted_4, [\n        createVNode(_component_el_button_group, null, {\n          default: withCtx(() => [\n            createVNode(_component_el_button, {\n              size: \"mini\",\n              onClick: _cache[1] || (_cache[1] = ($event) => _ctx.selectDate(\"prev-month\"))\n            }, {\n              default: withCtx(() => [\n                createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.prevMonth\")), 1)\n              ]),\n              _: 1\n            }),\n            createVNode(_component_el_button, {\n              size: \"mini\",\n              onClick: _cache[2] || (_cache[2] = ($event) => _ctx.selectDate(\"today\"))\n            }, {\n              default: withCtx(() => [\n                createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.today\")), 1)\n              ]),\n              _: 1\n            }),\n            createVNode(_component_el_button, {\n              size: \"mini\",\n              onClick: _cache[3] || (_cache[3] = ($event) => _ctx.selectDate(\"next-month\"))\n            }, {\n              default: withCtx(() => [\n                createTextVNode(toDisplayString(_ctx.t(\"el.datepicker.nextMonth\")), 1)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ])) : createCommentVNode(\"v-if\", true)\n    ]),\n    _ctx.validatedRange.length === 0 ? (openBlock(), createBlock(\"div\", _hoisted_5, [\n      createVNode(_component_date_table, {\n        date: _ctx.date,\n        \"selected-day\": _ctx.realSelectedDay,\n        onPick: _ctx.pickDay\n      }, createSlots({ _: 2 }, [\n        _ctx.$slots.dateCell ? {\n          name: \"dateCell\",\n          fn: withCtx((data) => [\n            renderSlot(_ctx.$slots, \"dateCell\", data)\n          ])\n        } : void 0\n      ]), 1032, [\"date\", \"selected-day\", \"onPick\"])\n    ])) : (openBlock(), createBlock(\"div\", _hoisted_6, [\n      (openBlock(true), createBlock(Fragment, null, renderList(_ctx.validatedRange, (range_, index) => {\n        return openBlock(), createBlock(_component_date_table, {\n          key: index,\n          date: range_[0],\n          \"selected-day\": _ctx.realSelectedDay,\n          range: range_,\n          \"hide-header\": index !== 0,\n          onPick: _ctx.pickDay\n        }, createSlots({ _: 2 }, [\n          _ctx.$slots.dateCell ? {\n            name: \"dateCell\",\n            fn: withCtx((data) => [\n              renderSlot(_ctx.$slots, \"dateCell\", data)\n            ])\n          } : void 0\n        ]), 1032, [\"date\", \"selected-day\", \"range\", \"hide-header\", \"onPick\"]);\n      }), 128))\n    ]))\n  ]);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/calendar/src/index.vue\";\n\nscript$1.install = (app) => {\n  app.component(script$1.name, script$1);\n};\nconst _Calendar = script$1;\n\nexport default _Calendar;\n"]},"metadata":{},"sourceType":"module"}