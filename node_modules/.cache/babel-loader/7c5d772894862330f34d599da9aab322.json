{"ast":null,"code":"import \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { defineComponent, ref, computed, watch, onMounted, onUpdated, nextTick, resolveComponent, resolveDirective, openBlock, createBlock, withCtx, withDirectives, createVNode, mergeProps, withKeys, withModifiers, createSlots, renderSlot, Fragment, renderList, createTextVNode, toDisplayString } from 'vue';\nimport { useAttrs } from '../hooks';\nimport debounce from 'lodash/debounce';\nimport { ClickOutside } from '../directives';\nimport { generateId, isArray } from '../utils/util';\nimport { UPDATE_MODEL_EVENT } from '../utils/constants';\nimport throwError from '../utils/error';\nimport ElInput from '../el-input';\nimport ElScrollbar from '../el-scrollbar';\nimport ElPopper from '../el-popper';\n/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\n\nvar EMPTY_OBJ = process.env.NODE_ENV !== 'production' ? Object.freeze({}) : {};\nvar EMPTY_ARR = process.env.NODE_ENV !== 'production' ? Object.freeze([]) : [];\n\nvar NOOP = function NOOP() {};\n\nvar script = defineComponent({\n  name: \"ElAutocomplete\",\n  components: {\n    ElPopper: ElPopper,\n    ElInput: ElInput,\n    ElScrollbar: ElScrollbar\n  },\n  directives: {\n    clickoutside: ClickOutside\n  },\n  inheritAttrs: false,\n  props: {\n    valueKey: {\n      type: String,\n      default: \"value\"\n    },\n    modelValue: {\n      type: [String, Number],\n      default: \"\"\n    },\n    debounce: {\n      type: Number,\n      default: 300\n    },\n    placement: {\n      type: String,\n      validator: function validator(val) {\n        return [\"top\", \"top-start\", \"top-end\", \"bottom\", \"bottom-start\", \"bottom-end\"].includes(val);\n      },\n      default: \"bottom-start\"\n    },\n    fetchSuggestions: {\n      type: Function,\n      default: NOOP\n    },\n    popperClass: {\n      type: String,\n      default: \"\"\n    },\n    triggerOnFocus: {\n      type: Boolean,\n      default: true\n    },\n    selectWhenUnmatched: {\n      type: Boolean,\n      default: false\n    },\n    hideLoading: {\n      type: Boolean,\n      default: false\n    },\n    popperAppendToBody: {\n      type: Boolean,\n      default: true\n    },\n    highlightFirstItem: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT, \"input\", \"change\", \"focus\", \"blur\", \"clear\", \"select\"],\n  setup: function setup(props, ctx) {\n    var attrs = useAttrs();\n    var suggestions = ref([]);\n    var highlightedIndex = ref(-1);\n    var dropdownWidth = ref(\"\");\n    var activated = ref(false);\n    var suggestionDisabled = ref(false);\n    var loading = ref(false);\n    var inputRef = ref(null);\n    var regionRef = ref(null);\n    var popper = ref(null);\n    var id = computed(function () {\n      return \"el-autocomplete-\".concat(generateId());\n    });\n    var suggestionVisible = computed(function () {\n      var isValidData = isArray(suggestions.value) && suggestions.value.length > 0;\n      return (isValidData || loading.value) && activated.value;\n    });\n    var suggestionLoading = computed(function () {\n      return !props.hideLoading && loading.value;\n    });\n\n    var updatePopperPosition = function updatePopperPosition() {\n      nextTick(popper.value.update);\n    };\n\n    watch(suggestionVisible, function () {\n      dropdownWidth.value = \"\".concat(inputRef.value.$el.offsetWidth, \"px\");\n    });\n    onMounted(function () {\n      inputRef.value.inputOrTextarea.setAttribute(\"role\", \"textbox\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-autocomplete\", \"list\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-controls\", \"id\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-activedescendant\", \"\".concat(id.value, \"-item-\").concat(highlightedIndex.value));\n      var $ul = regionRef.value.querySelector(\".el-autocomplete-suggestion__list\");\n      $ul.setAttribute(\"role\", \"listbox\");\n      $ul.setAttribute(\"id\", id.value);\n    });\n    onUpdated(updatePopperPosition);\n\n    var getData = function getData(queryString) {\n      if (suggestionDisabled.value) {\n        return;\n      }\n\n      loading.value = true;\n      updatePopperPosition();\n      props.fetchSuggestions(queryString, function (suggestionsArg) {\n        loading.value = false;\n\n        if (suggestionDisabled.value) {\n          return;\n        }\n\n        if (isArray(suggestionsArg)) {\n          suggestions.value = suggestionsArg;\n          highlightedIndex.value = props.highlightFirstItem ? 0 : -1;\n        } else {\n          throwError(\"ElAutocomplete\", \"autocomplete suggestions must be an array\");\n        }\n      });\n    };\n\n    var debouncedGetData = debounce(getData, props.debounce);\n\n    var handleInput = function handleInput(value) {\n      ctx.emit(\"input\", value);\n      ctx.emit(UPDATE_MODEL_EVENT, value);\n      suggestionDisabled.value = false;\n\n      if (!props.triggerOnFocus && !value) {\n        suggestionDisabled.value = true;\n        suggestions.value = [];\n        return;\n      }\n\n      debouncedGetData(value);\n    };\n\n    var handleChange = function handleChange(value) {\n      ctx.emit(\"change\", value);\n    };\n\n    var handleFocus = function handleFocus(e) {\n      activated.value = true;\n      ctx.emit(\"focus\", e);\n\n      if (props.triggerOnFocus) {\n        debouncedGetData(props.modelValue);\n      }\n    };\n\n    var handleBlur = function handleBlur(e) {\n      ctx.emit(\"blur\", e);\n    };\n\n    var handleClear = function handleClear() {\n      activated.value = false;\n      ctx.emit(UPDATE_MODEL_EVENT, \"\");\n      ctx.emit(\"clear\");\n    };\n\n    var handleKeyEnter = function handleKeyEnter() {\n      if (suggestionVisible.value && highlightedIndex.value >= 0 && highlightedIndex.value < suggestions.value.length) {\n        select(suggestions.value[highlightedIndex.value]);\n      } else if (props.selectWhenUnmatched) {\n        ctx.emit(\"select\", {\n          value: props.modelValue\n        });\n        nextTick(function () {\n          suggestions.value = [];\n          highlightedIndex.value = -1;\n        });\n      }\n    };\n\n    var close = function close() {\n      activated.value = false;\n    };\n\n    var focus = function focus() {\n      inputRef.value.focus();\n    };\n\n    var select = function select(item) {\n      ctx.emit(\"input\", item[props.valueKey]);\n      ctx.emit(UPDATE_MODEL_EVENT, item[props.valueKey]);\n      ctx.emit(\"select\", item);\n      nextTick(function () {\n        suggestions.value = [];\n        highlightedIndex.value = -1;\n      });\n    };\n\n    var highlight = function highlight(index) {\n      if (!suggestionVisible.value || loading.value) {\n        return;\n      }\n\n      if (index < 0) {\n        highlightedIndex.value = -1;\n        return;\n      }\n\n      if (index >= suggestions.value.length) {\n        index = suggestions.value.length - 1;\n      }\n\n      var suggestion = regionRef.value.querySelector(\".el-autocomplete-suggestion__wrap\");\n      var suggestionList = suggestion.querySelectorAll(\".el-autocomplete-suggestion__list li\");\n      var highlightItem = suggestionList[index];\n      var scrollTop = suggestion.scrollTop;\n      var offsetTop = highlightItem.offsetTop,\n          scrollHeight = highlightItem.scrollHeight;\n\n      if (offsetTop + scrollHeight > scrollTop + suggestion.clientHeight) {\n        suggestion.scrollTop += scrollHeight;\n      }\n\n      if (offsetTop < scrollTop) {\n        suggestion.scrollTop -= scrollHeight;\n      }\n\n      highlightedIndex.value = index;\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-activedescendant\", \"\".concat(id.value, \"-item-\").concat(highlightedIndex.value));\n    };\n\n    return {\n      attrs: attrs,\n      suggestions: suggestions,\n      highlightedIndex: highlightedIndex,\n      dropdownWidth: dropdownWidth,\n      activated: activated,\n      suggestionDisabled: suggestionDisabled,\n      loading: loading,\n      inputRef: inputRef,\n      regionRef: regionRef,\n      popper: popper,\n      id: id,\n      suggestionVisible: suggestionVisible,\n      suggestionLoading: suggestionLoading,\n      getData: getData,\n      handleInput: handleInput,\n      handleChange: handleChange,\n      handleFocus: handleFocus,\n      handleBlur: handleBlur,\n      handleClear: handleClear,\n      handleKeyEnter: handleKeyEnter,\n      close: close,\n      focus: focus,\n      select: select,\n      highlight: highlight\n    };\n  }\n});\nvar _hoisted_1 = {\n  key: 0\n};\n\nvar _hoisted_2 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-loading\"\n}, null, -1);\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_input = resolveComponent(\"el-input\");\n\n  var _component_el_scrollbar = resolveComponent(\"el-scrollbar\");\n\n  var _component_el_popper = resolveComponent(\"el-popper\");\n\n  var _directive_clickoutside = resolveDirective(\"clickoutside\");\n\n  return openBlock(), createBlock(_component_el_popper, {\n    ref: \"popper\",\n    visible: _ctx.suggestionVisible,\n    \"onUpdate:visible\": _cache[3] || (_cache[3] = function ($event) {\n      return _ctx.suggestionVisible = $event;\n    }),\n    placement: _ctx.placement,\n    \"popper-class\": \"el-autocomplete__popper \".concat(_ctx.popperClass),\n    \"append-to-body\": _ctx.popperAppendToBody,\n    pure: \"\",\n    \"manual-mode\": \"\",\n    effect: \"light\",\n    trigger: \"click\",\n    transition: \"el-zoom-in-top\",\n    \"gpu-acceleration\": false\n  }, {\n    trigger: withCtx(function () {\n      return [withDirectives(createVNode(\"div\", {\n        class: [\"el-autocomplete\", _ctx.$attrs.class],\n        style: _ctx.$attrs.style,\n        role: \"combobox\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-expanded\": _ctx.suggestionVisible,\n        \"aria-owns\": _ctx.id\n      }, [createVNode(_component_el_input, mergeProps({\n        ref: \"inputRef\"\n      }, _ctx.attrs, {\n        \"model-value\": _ctx.modelValue,\n        onInput: _ctx.handleInput,\n        onChange: _ctx.handleChange,\n        onFocus: _ctx.handleFocus,\n        onBlur: _ctx.handleBlur,\n        onClear: _ctx.handleClear,\n        onKeydown: [_cache[1] || (_cache[1] = withKeys(withModifiers(function ($event) {\n          return _ctx.highlight(_ctx.highlightedIndex - 1);\n        }, [\"prevent\"]), [\"up\"])), _cache[2] || (_cache[2] = withKeys(withModifiers(function ($event) {\n          return _ctx.highlight(_ctx.highlightedIndex + 1);\n        }, [\"prevent\"]), [\"down\"])), withKeys(_ctx.handleKeyEnter, [\"enter\"]), withKeys(_ctx.close, [\"tab\"])]\n      }), createSlots({\n        _: 2\n      }, [_ctx.$slots.prepend ? {\n        name: \"prepend\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"prepend\")];\n        })\n      } : void 0, _ctx.$slots.append ? {\n        name: \"append\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"append\")];\n        })\n      } : void 0, _ctx.$slots.prefix ? {\n        name: \"prefix\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"prefix\")];\n        })\n      } : void 0, _ctx.$slots.suffix ? {\n        name: \"suffix\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"suffix\")];\n        })\n      } : void 0]), 1040, [\"model-value\", \"onInput\", \"onChange\", \"onFocus\", \"onBlur\", \"onClear\", \"onKeydown\"])], 14, [\"aria-expanded\", \"aria-owns\"]), [[_directive_clickoutside, _ctx.close]])];\n    }),\n    default: withCtx(function () {\n      return [createVNode(\"div\", {\n        ref: \"regionRef\",\n        class: [\"el-autocomplete-suggestion\", _ctx.suggestionLoading && \"is-loading\"],\n        style: {\n          width: _ctx.dropdownWidth,\n          outline: \"none\"\n        },\n        role: \"region\"\n      }, [createVNode(_component_el_scrollbar, {\n        tag: \"ul\",\n        \"wrap-class\": \"el-autocomplete-suggestion__wrap\",\n        \"view-class\": \"el-autocomplete-suggestion__list\"\n      }, {\n        default: withCtx(function () {\n          return [_ctx.suggestionLoading ? (openBlock(), createBlock(\"li\", _hoisted_1, [_hoisted_2])) : (openBlock(true), createBlock(Fragment, {\n            key: 1\n          }, renderList(_ctx.suggestions, function (item, index) {\n            return openBlock(), createBlock(\"li\", {\n              id: \"\".concat(_ctx.id, \"-item-\").concat(index),\n              key: index,\n              class: {\n                \"highlighted\": _ctx.highlightedIndex === index\n              },\n              role: \"option\",\n              \"aria-selected\": _ctx.highlightedIndex === index,\n              onClick: function onClick($event) {\n                return _ctx.select(item);\n              }\n            }, [renderSlot(_ctx.$slots, \"default\", {\n              item: item\n            }, function () {\n              return [createTextVNode(toDisplayString(item[_ctx.valueKey]), 1)];\n            })], 10, [\"id\", \"aria-selected\", \"onClick\"]);\n          }), 128))];\n        }),\n        _: 3\n      })], 6)];\n    }),\n    _: 1\n  }, 8, [\"visible\", \"placement\", \"popper-class\", \"append-to-body\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/autocomplete/src/index.vue\";\n\nscript.install = function (app) {\n  app.component(script.name, script);\n};\n\nvar _Autocomplete = script;\nexport default _Autocomplete;","map":{"version":3,"sources":["/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/element-plus/es/el-autocomplete/index.js"],"names":["defineComponent","ref","computed","watch","onMounted","onUpdated","nextTick","resolveComponent","resolveDirective","openBlock","createBlock","withCtx","withDirectives","createVNode","mergeProps","withKeys","withModifiers","createSlots","renderSlot","Fragment","renderList","createTextVNode","toDisplayString","useAttrs","debounce","ClickOutside","generateId","isArray","UPDATE_MODEL_EVENT","throwError","ElInput","ElScrollbar","ElPopper","EMPTY_OBJ","process","env","NODE_ENV","Object","freeze","EMPTY_ARR","NOOP","script","name","components","directives","clickoutside","inheritAttrs","props","valueKey","type","String","default","modelValue","Number","placement","validator","val","includes","fetchSuggestions","Function","popperClass","triggerOnFocus","Boolean","selectWhenUnmatched","hideLoading","popperAppendToBody","highlightFirstItem","emits","setup","ctx","attrs","suggestions","highlightedIndex","dropdownWidth","activated","suggestionDisabled","loading","inputRef","regionRef","popper","id","suggestionVisible","isValidData","value","length","suggestionLoading","updatePopperPosition","update","$el","offsetWidth","inputOrTextarea","setAttribute","$ul","querySelector","getData","queryString","suggestionsArg","debouncedGetData","handleInput","emit","handleChange","handleFocus","e","handleBlur","handleClear","handleKeyEnter","select","close","focus","item","highlight","index","suggestion","suggestionList","querySelectorAll","highlightItem","scrollTop","offsetTop","scrollHeight","clientHeight","_hoisted_1","key","_hoisted_2","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_input","_component_el_scrollbar","_component_el_popper","_directive_clickoutside","visible","$event","pure","effect","trigger","transition","$attrs","style","role","onInput","onChange","onFocus","onBlur","onClear","onKeydown","_","$slots","prepend","fn","append","prefix","suffix","width","outline","tag","onClick","__file","install","app","component","_Autocomplete"],"mappings":"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","sourcesContent":["import { defineComponent, ref, computed, watch, onMounted, onUpdated, nextTick, resolveComponent, resolveDirective, openBlock, createBlock, withCtx, withDirectives, createVNode, mergeProps, withKeys, withModifiers, createSlots, renderSlot, Fragment, renderList, createTextVNode, toDisplayString } from 'vue';\nimport { useAttrs } from '../hooks';\nimport debounce from 'lodash/debounce';\nimport { ClickOutside } from '../directives';\nimport { generateId, isArray } from '../utils/util';\nimport { UPDATE_MODEL_EVENT } from '../utils/constants';\nimport throwError from '../utils/error';\nimport ElInput from '../el-input';\nimport ElScrollbar from '../el-scrollbar';\nimport ElPopper from '../el-popper';\n\n/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\r\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\r\nconst NOOP = () => { };\n\nvar script = defineComponent({\n  name: \"ElAutocomplete\",\n  components: {\n    ElPopper,\n    ElInput,\n    ElScrollbar\n  },\n  directives: {\n    clickoutside: ClickOutside\n  },\n  inheritAttrs: false,\n  props: {\n    valueKey: {\n      type: String,\n      default: \"value\"\n    },\n    modelValue: {\n      type: [String, Number],\n      default: \"\"\n    },\n    debounce: {\n      type: Number,\n      default: 300\n    },\n    placement: {\n      type: String,\n      validator: (val) => {\n        return [\"top\", \"top-start\", \"top-end\", \"bottom\", \"bottom-start\", \"bottom-end\"].includes(val);\n      },\n      default: \"bottom-start\"\n    },\n    fetchSuggestions: {\n      type: Function,\n      default: NOOP\n    },\n    popperClass: {\n      type: String,\n      default: \"\"\n    },\n    triggerOnFocus: {\n      type: Boolean,\n      default: true\n    },\n    selectWhenUnmatched: {\n      type: Boolean,\n      default: false\n    },\n    hideLoading: {\n      type: Boolean,\n      default: false\n    },\n    popperAppendToBody: {\n      type: Boolean,\n      default: true\n    },\n    highlightFirstItem: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT, \"input\", \"change\", \"focus\", \"blur\", \"clear\", \"select\"],\n  setup(props, ctx) {\n    const attrs = useAttrs();\n    const suggestions = ref([]);\n    const highlightedIndex = ref(-1);\n    const dropdownWidth = ref(\"\");\n    const activated = ref(false);\n    const suggestionDisabled = ref(false);\n    const loading = ref(false);\n    const inputRef = ref(null);\n    const regionRef = ref(null);\n    const popper = ref(null);\n    const id = computed(() => {\n      return `el-autocomplete-${generateId()}`;\n    });\n    const suggestionVisible = computed(() => {\n      const isValidData = isArray(suggestions.value) && suggestions.value.length > 0;\n      return (isValidData || loading.value) && activated.value;\n    });\n    const suggestionLoading = computed(() => {\n      return !props.hideLoading && loading.value;\n    });\n    const updatePopperPosition = () => {\n      nextTick(popper.value.update);\n    };\n    watch(suggestionVisible, () => {\n      dropdownWidth.value = `${inputRef.value.$el.offsetWidth}px`;\n    });\n    onMounted(() => {\n      inputRef.value.inputOrTextarea.setAttribute(\"role\", \"textbox\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-autocomplete\", \"list\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-controls\", \"id\");\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-activedescendant\", `${id.value}-item-${highlightedIndex.value}`);\n      const $ul = regionRef.value.querySelector(\".el-autocomplete-suggestion__list\");\n      $ul.setAttribute(\"role\", \"listbox\");\n      $ul.setAttribute(\"id\", id.value);\n    });\n    onUpdated(updatePopperPosition);\n    const getData = (queryString) => {\n      if (suggestionDisabled.value) {\n        return;\n      }\n      loading.value = true;\n      updatePopperPosition();\n      props.fetchSuggestions(queryString, (suggestionsArg) => {\n        loading.value = false;\n        if (suggestionDisabled.value) {\n          return;\n        }\n        if (isArray(suggestionsArg)) {\n          suggestions.value = suggestionsArg;\n          highlightedIndex.value = props.highlightFirstItem ? 0 : -1;\n        } else {\n          throwError(\"ElAutocomplete\", \"autocomplete suggestions must be an array\");\n        }\n      });\n    };\n    const debouncedGetData = debounce(getData, props.debounce);\n    const handleInput = (value) => {\n      ctx.emit(\"input\", value);\n      ctx.emit(UPDATE_MODEL_EVENT, value);\n      suggestionDisabled.value = false;\n      if (!props.triggerOnFocus && !value) {\n        suggestionDisabled.value = true;\n        suggestions.value = [];\n        return;\n      }\n      debouncedGetData(value);\n    };\n    const handleChange = (value) => {\n      ctx.emit(\"change\", value);\n    };\n    const handleFocus = (e) => {\n      activated.value = true;\n      ctx.emit(\"focus\", e);\n      if (props.triggerOnFocus) {\n        debouncedGetData(props.modelValue);\n      }\n    };\n    const handleBlur = (e) => {\n      ctx.emit(\"blur\", e);\n    };\n    const handleClear = () => {\n      activated.value = false;\n      ctx.emit(UPDATE_MODEL_EVENT, \"\");\n      ctx.emit(\"clear\");\n    };\n    const handleKeyEnter = () => {\n      if (suggestionVisible.value && highlightedIndex.value >= 0 && highlightedIndex.value < suggestions.value.length) {\n        select(suggestions.value[highlightedIndex.value]);\n      } else if (props.selectWhenUnmatched) {\n        ctx.emit(\"select\", { value: props.modelValue });\n        nextTick(() => {\n          suggestions.value = [];\n          highlightedIndex.value = -1;\n        });\n      }\n    };\n    const close = () => {\n      activated.value = false;\n    };\n    const focus = () => {\n      inputRef.value.focus();\n    };\n    const select = (item) => {\n      ctx.emit(\"input\", item[props.valueKey]);\n      ctx.emit(UPDATE_MODEL_EVENT, item[props.valueKey]);\n      ctx.emit(\"select\", item);\n      nextTick(() => {\n        suggestions.value = [];\n        highlightedIndex.value = -1;\n      });\n    };\n    const highlight = (index) => {\n      if (!suggestionVisible.value || loading.value) {\n        return;\n      }\n      if (index < 0) {\n        highlightedIndex.value = -1;\n        return;\n      }\n      if (index >= suggestions.value.length) {\n        index = suggestions.value.length - 1;\n      }\n      const suggestion = regionRef.value.querySelector(\".el-autocomplete-suggestion__wrap\");\n      const suggestionList = suggestion.querySelectorAll(\".el-autocomplete-suggestion__list li\");\n      const highlightItem = suggestionList[index];\n      const scrollTop = suggestion.scrollTop;\n      const { offsetTop, scrollHeight } = highlightItem;\n      if (offsetTop + scrollHeight > scrollTop + suggestion.clientHeight) {\n        suggestion.scrollTop += scrollHeight;\n      }\n      if (offsetTop < scrollTop) {\n        suggestion.scrollTop -= scrollHeight;\n      }\n      highlightedIndex.value = index;\n      inputRef.value.inputOrTextarea.setAttribute(\"aria-activedescendant\", `${id.value}-item-${highlightedIndex.value}`);\n    };\n    return {\n      attrs,\n      suggestions,\n      highlightedIndex,\n      dropdownWidth,\n      activated,\n      suggestionDisabled,\n      loading,\n      inputRef,\n      regionRef,\n      popper,\n      id,\n      suggestionVisible,\n      suggestionLoading,\n      getData,\n      handleInput,\n      handleChange,\n      handleFocus,\n      handleBlur,\n      handleClear,\n      handleKeyEnter,\n      close,\n      focus,\n      select,\n      highlight\n    };\n  }\n});\n\nconst _hoisted_1 = { key: 0 };\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-loading\" }, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = resolveComponent(\"el-input\");\n  const _component_el_scrollbar = resolveComponent(\"el-scrollbar\");\n  const _component_el_popper = resolveComponent(\"el-popper\");\n  const _directive_clickoutside = resolveDirective(\"clickoutside\");\n  return openBlock(), createBlock(_component_el_popper, {\n    ref: \"popper\",\n    visible: _ctx.suggestionVisible,\n    \"onUpdate:visible\": _cache[3] || (_cache[3] = ($event) => _ctx.suggestionVisible = $event),\n    placement: _ctx.placement,\n    \"popper-class\": `el-autocomplete__popper ${_ctx.popperClass}`,\n    \"append-to-body\": _ctx.popperAppendToBody,\n    pure: \"\",\n    \"manual-mode\": \"\",\n    effect: \"light\",\n    trigger: \"click\",\n    transition: \"el-zoom-in-top\",\n    \"gpu-acceleration\": false\n  }, {\n    trigger: withCtx(() => [\n      withDirectives(createVNode(\"div\", {\n        class: [\"el-autocomplete\", _ctx.$attrs.class],\n        style: _ctx.$attrs.style,\n        role: \"combobox\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-expanded\": _ctx.suggestionVisible,\n        \"aria-owns\": _ctx.id\n      }, [\n        createVNode(_component_el_input, mergeProps({ ref: \"inputRef\" }, _ctx.attrs, {\n          \"model-value\": _ctx.modelValue,\n          onInput: _ctx.handleInput,\n          onChange: _ctx.handleChange,\n          onFocus: _ctx.handleFocus,\n          onBlur: _ctx.handleBlur,\n          onClear: _ctx.handleClear,\n          onKeydown: [\n            _cache[1] || (_cache[1] = withKeys(withModifiers(($event) => _ctx.highlight(_ctx.highlightedIndex - 1), [\"prevent\"]), [\"up\"])),\n            _cache[2] || (_cache[2] = withKeys(withModifiers(($event) => _ctx.highlight(_ctx.highlightedIndex + 1), [\"prevent\"]), [\"down\"])),\n            withKeys(_ctx.handleKeyEnter, [\"enter\"]),\n            withKeys(_ctx.close, [\"tab\"])\n          ]\n        }), createSlots({ _: 2 }, [\n          _ctx.$slots.prepend ? {\n            name: \"prepend\",\n            fn: withCtx(() => [\n              renderSlot(_ctx.$slots, \"prepend\")\n            ])\n          } : void 0,\n          _ctx.$slots.append ? {\n            name: \"append\",\n            fn: withCtx(() => [\n              renderSlot(_ctx.$slots, \"append\")\n            ])\n          } : void 0,\n          _ctx.$slots.prefix ? {\n            name: \"prefix\",\n            fn: withCtx(() => [\n              renderSlot(_ctx.$slots, \"prefix\")\n            ])\n          } : void 0,\n          _ctx.$slots.suffix ? {\n            name: \"suffix\",\n            fn: withCtx(() => [\n              renderSlot(_ctx.$slots, \"suffix\")\n            ])\n          } : void 0\n        ]), 1040, [\"model-value\", \"onInput\", \"onChange\", \"onFocus\", \"onBlur\", \"onClear\", \"onKeydown\"])\n      ], 14, [\"aria-expanded\", \"aria-owns\"]), [\n        [_directive_clickoutside, _ctx.close]\n      ])\n    ]),\n    default: withCtx(() => [\n      createVNode(\"div\", {\n        ref: \"regionRef\",\n        class: [\"el-autocomplete-suggestion\", _ctx.suggestionLoading && \"is-loading\"],\n        style: { width: _ctx.dropdownWidth, outline: \"none\" },\n        role: \"region\"\n      }, [\n        createVNode(_component_el_scrollbar, {\n          tag: \"ul\",\n          \"wrap-class\": \"el-autocomplete-suggestion__wrap\",\n          \"view-class\": \"el-autocomplete-suggestion__list\"\n        }, {\n          default: withCtx(() => [\n            _ctx.suggestionLoading ? (openBlock(), createBlock(\"li\", _hoisted_1, [\n              _hoisted_2\n            ])) : (openBlock(true), createBlock(Fragment, { key: 1 }, renderList(_ctx.suggestions, (item, index) => {\n              return openBlock(), createBlock(\"li\", {\n                id: `${_ctx.id}-item-${index}`,\n                key: index,\n                class: { \"highlighted\": _ctx.highlightedIndex === index },\n                role: \"option\",\n                \"aria-selected\": _ctx.highlightedIndex === index,\n                onClick: ($event) => _ctx.select(item)\n              }, [\n                renderSlot(_ctx.$slots, \"default\", { item }, () => [\n                  createTextVNode(toDisplayString(item[_ctx.valueKey]), 1)\n                ])\n              ], 10, [\"id\", \"aria-selected\", \"onClick\"]);\n            }), 128))\n          ]),\n          _: 3\n        })\n      ], 6)\n    ]),\n    _: 1\n  }, 8, [\"visible\", \"placement\", \"popper-class\", \"append-to-body\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/autocomplete/src/index.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _Autocomplete = script;\n\nexport default _Autocomplete;\n"]},"metadata":{},"sourceType":"module"}