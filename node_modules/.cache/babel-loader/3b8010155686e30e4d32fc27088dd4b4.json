{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.number.parse-int.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { ref, reactive, toRefs, createVNode, render, h, Transition, withCtx, withDirectives, vShow, nextTick } from 'vue';\nimport { removeClass, getStyle, addClass } from '../utils/dom';\nimport PopupManager from '../utils/popup-manager';\nimport isServer from '../utils/isServer';\n/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\n\nvar EMPTY_OBJ = process.env.NODE_ENV !== 'production' ? Object.freeze({}) : {};\nvar EMPTY_ARR = process.env.NODE_ENV !== 'production' ? Object.freeze([]) : [];\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar hasOwn = function hasOwn(val, key) {\n  return hasOwnProperty.call(val, key);\n};\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  return a;\n};\n\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\n\nfunction createLoadingComponent(_ref) {\n  var options = _ref.options,\n      globalLoadingOption = _ref.globalLoadingOption;\n  var vm = null;\n  var afterLeaveTimer = null;\n  var afterLeaveFlag = ref(false);\n  var data = reactive(__spreadProps(__spreadValues({}, options), {\n    originalPosition: \"\",\n    originalOverflow: \"\",\n    visible: false\n  }));\n\n  function setText(text) {\n    data.text = text;\n  }\n\n  function destroySelf() {\n    var target = data.parent;\n\n    if (!target.vLoadingAddClassList) {\n      var loadingNumber = target.getAttribute(\"loading-number\");\n      loadingNumber = Number.parseInt(loadingNumber) - 1;\n\n      if (!loadingNumber) {\n        removeClass(target, \"el-loading-parent--relative\");\n        target.removeAttribute(\"loading-number\");\n      } else {\n        target.setAttribute(\"loading-number\", loadingNumber.toString());\n      }\n\n      removeClass(target, \"el-loading-parent--hidden\");\n    }\n\n    if (vm.el && vm.el.parentNode) {\n      vm.el.parentNode.removeChild(vm.el);\n    }\n  }\n\n  function close() {\n    var target = data.parent;\n    target.vLoadingAddClassList = null;\n\n    if (data.fullscreen) {\n      globalLoadingOption.fullscreenLoading = void 0;\n    }\n\n    afterLeaveFlag.value = true;\n    clearTimeout(afterLeaveTimer);\n    afterLeaveTimer = window.setTimeout(function () {\n      if (afterLeaveFlag.value) {\n        afterLeaveFlag.value = false;\n        destroySelf();\n      }\n    }, 400);\n    data.visible = false;\n  }\n\n  function handleAfterLeave() {\n    if (!afterLeaveFlag.value) return;\n    afterLeaveFlag.value = false;\n    destroySelf();\n  }\n\n  var componentSetupConfig = __spreadProps(__spreadValues({}, toRefs(data)), {\n    setText: setText,\n    close: close,\n    handleAfterLeave: handleAfterLeave\n  });\n\n  var elLoadingComponent = {\n    name: \"ElLoading\",\n    setup: function setup() {\n      return componentSetupConfig;\n    },\n    render: function render() {\n      var _this = this;\n\n      var spinner = h(\"svg\", __spreadValues({\n        class: \"circular\",\n        viewBox: this.svgViewBox ? this.svgViewBox : \"25 25 50 50\"\n      }, this.svg ? {\n        innerHTML: this.svg\n      } : {}), [h(\"circle\", {\n        class: \"path\",\n        cx: \"50\",\n        cy: \"50\",\n        r: \"20\",\n        fill: \"none\"\n      })]);\n      var noSpinner = h(\"i\", {\n        class: this.spinner\n      });\n      var spinnerText = h(\"p\", {\n        class: \"el-loading-text\"\n      }, [this.text]);\n      return h(Transition, {\n        name: \"el-loading-fade\",\n        onAfterLeave: this.handleAfterLeave\n      }, {\n        default: withCtx(function () {\n          return [withDirectives(createVNode(\"div\", {\n            style: {\n              backgroundColor: _this.background || \"\"\n            },\n            class: [\"el-loading-mask\", _this.customClass, _this.fullscreen ? \"is-fullscreen\" : \"\"]\n          }, [h(\"div\", {\n            class: \"el-loading-spinner\"\n          }, [!_this.spinner ? spinner : noSpinner, _this.text ? spinnerText : null])]), [[vShow, _this.visible]])];\n        })\n      });\n    }\n  };\n  vm = createVNode(elLoadingComponent);\n  render(vm, document.createElement(\"div\"));\n  return __spreadProps(__spreadValues({}, componentSetupConfig), {\n    vm: vm,\n\n    get $el() {\n      return vm.el;\n    }\n\n  });\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp$1 = function __defNormalProp$1(obj, key, value) {\n  return key in obj ? __defProp$1(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __spreadValues$1 = function __spreadValues$1(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp$1.call(b, prop)) __defNormalProp$1(a, prop, b[prop]);\n  }\n\n  if (__getOwnPropSymbols$1) {\n    var _iterator2 = _createForOfIteratorHelper(__getOwnPropSymbols$1(b)),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var prop = _step2.value;\n        if (__propIsEnum$1.call(b, prop)) __defNormalProp$1(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return a;\n};\n\nvar __async = function __async(__this, __arguments, generator) {\n  return new Promise(function (resolve, reject) {\n    var fulfilled = function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n\n    var rejected = function rejected(value) {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n\n    var step = function step(x) {\n      return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    };\n\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\nvar defaults = {\n  parent: null,\n  background: \"\",\n  svg: null,\n  svgViewBox: null,\n  spinner: false,\n  text: null,\n  fullscreen: true,\n  body: false,\n  lock: false,\n  customClass: \"\"\n};\nvar globalLoadingOption = {\n  fullscreenLoading: null\n};\n\nvar addStyle = function addStyle(options, parent, instance) {\n  return __async(undefined, null, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var maskStyle;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            maskStyle = {};\n\n            if (!options.fullscreen) {\n              _context.next = 7;\n              break;\n            }\n\n            instance.originalPosition.value = getStyle(document.body, \"position\");\n            instance.originalOverflow.value = getStyle(document.body, \"overflow\");\n            maskStyle.zIndex = String(PopupManager.nextZIndex());\n            _context.next = 16;\n            break;\n\n          case 7:\n            if (!options.body) {\n              _context.next = 15;\n              break;\n            }\n\n            instance.originalPosition.value = getStyle(document.body, \"position\");\n            _context.next = 11;\n            return nextTick();\n\n          case 11:\n            [\"top\", \"left\"].forEach(function (property) {\n              var scroll = property === \"top\" ? \"scrollTop\" : \"scrollLeft\";\n              maskStyle[property] = options.target.getBoundingClientRect()[property] + document.body[scroll] + document.documentElement[scroll] - parseInt(getStyle(document.body, \"margin-\".concat(property)), 10) + \"px\";\n            });\n            [\"height\", \"width\"].forEach(function (property) {\n              maskStyle[property] = options.target.getBoundingClientRect()[property] + \"px\";\n            });\n            _context.next = 16;\n            break;\n\n          case 15:\n            instance.originalPosition.value = getStyle(parent, \"position\");\n\n          case 16:\n            Object.keys(maskStyle).forEach(function (property) {\n              instance.$el.style[property] = maskStyle[property];\n            });\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n};\n\nvar addClassList = function addClassList(options, parent, instance) {\n  if (instance.originalPosition.value !== \"absolute\" && instance.originalPosition.value !== \"fixed\") {\n    addClass(parent, \"el-loading-parent--relative\");\n  } else {\n    removeClass(parent, \"el-loading-parent--relative\");\n  }\n\n  if (options.fullscreen && options.lock) {\n    addClass(parent, \"el-loading-parent--hidden\");\n  } else {\n    removeClass(parent, \"el-loading-parent--hidden\");\n  }\n};\n\nvar Loading = function Loading() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (isServer) return;\n  options = __spreadValues$1(__spreadValues$1({}, defaults), options);\n\n  if (typeof options.target === \"string\") {\n    options.target = document.querySelector(options.target);\n  }\n\n  options.target = options.target || document.body;\n\n  if (options.target !== document.body) {\n    options.fullscreen = false;\n  } else {\n    options.body = true;\n  }\n\n  if (options.fullscreen && globalLoadingOption.fullscreenLoading) {\n    globalLoadingOption.fullscreenLoading.close();\n  }\n\n  var parent = options.body ? document.body : options.target;\n  options.parent = parent;\n  var instance = createLoadingComponent({\n    options: options,\n    globalLoadingOption: globalLoadingOption\n  });\n  addStyle(options, parent, instance);\n  addClassList(options, parent, instance);\n\n  options.parent.vLoadingAddClassList = function () {\n    addClassList(options, parent, instance);\n  };\n\n  var loadingNumber = parent.getAttribute(\"loading-number\");\n\n  if (!loadingNumber) {\n    loadingNumber = 1;\n  } else {\n    loadingNumber = Number.parseInt(loadingNumber) + 1;\n  }\n\n  parent.setAttribute(\"loading-number\", loadingNumber.toString());\n  parent.appendChild(instance.$el);\n  nextTick().then(function () {\n    instance.visible.value = hasOwn(options, \"visible\") ? options.visible : true;\n  });\n\n  if (options.fullscreen) {\n    globalLoadingOption.fullscreenLoading = instance;\n  }\n\n  return instance;\n};\n\nvar createInstance = function createInstance(el, binding) {\n  var textExr = el.getAttribute(\"element-loading-text\");\n  var spinnerExr = el.getAttribute(\"element-loading-spinner\");\n  var svgExr = el.getAttribute(\"element-loading-svg\");\n  var svgViewBoxExr = el.getAttribute(\"element-loading-svg-view-box\");\n  var backgroundExr = el.getAttribute(\"element-loading-background\");\n  var customClassExr = el.getAttribute(\"element-loading-custom-class\");\n  var vm = binding.instance;\n  el.instance = Loading({\n    text: vm && vm[textExr] || textExr,\n    svg: vm && vm[svgExr] || svgExr,\n    svgViewBox: vm && vm[svgViewBoxExr] || svgViewBoxExr,\n    spinner: vm && vm[spinnerExr] || spinnerExr,\n    background: vm && vm[backgroundExr] || backgroundExr,\n    customClass: vm && vm[customClassExr] || customClassExr,\n    fullscreen: !!binding.modifiers.fullscreen,\n    target: !!binding.modifiers.fullscreen ? null : el,\n    body: !!binding.modifiers.body,\n    visible: true,\n    lock: !!binding.modifiers.lock\n  });\n};\n\nvar vLoading = {\n  mounted: function mounted(el, binding) {\n    if (!!binding.value) {\n      createInstance(el, binding);\n    }\n  },\n  updated: function updated(el, binding) {\n    var instance = el.instance;\n\n    if (binding.oldValue !== binding.value) {\n      if (binding.value) {\n        createInstance(el, binding);\n      } else {\n        instance.close();\n      }\n    }\n  },\n  unmounted: function unmounted(el) {\n    var _a;\n\n    (_a = el == null ? void 0 : el.instance) == null ? void 0 : _a.close();\n  }\n};\nvar index = {\n  install: function install(app) {\n    app.directive(\"loading\", vLoading);\n    app.config.globalProperties.$loading = Loading;\n  },\n  directive: vLoading,\n  service: Loading\n};\nexport default index;","map":{"version":3,"sources":["/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/element-plus/es/el-loading/index.js"],"names":["ref","reactive","toRefs","createVNode","render","h","Transition","withCtx","withDirectives","vShow","nextTick","removeClass","getStyle","addClass","PopupManager","isServer","EMPTY_OBJ","process","env","NODE_ENV","Object","freeze","EMPTY_ARR","hasOwnProperty","prototype","hasOwn","val","key","call","__defProp","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","value","enumerable","configurable","writable","__spreadValues","a","b","prop","__spreadProps","createLoadingComponent","options","globalLoadingOption","vm","afterLeaveTimer","afterLeaveFlag","data","originalPosition","originalOverflow","visible","setText","text","destroySelf","target","parent","vLoadingAddClassList","loadingNumber","getAttribute","Number","parseInt","removeAttribute","setAttribute","toString","el","parentNode","removeChild","close","fullscreen","fullscreenLoading","clearTimeout","window","setTimeout","handleAfterLeave","componentSetupConfig","elLoadingComponent","name","setup","spinner","class","viewBox","svgViewBox","svg","innerHTML","cx","cy","r","fill","noSpinner","spinnerText","onAfterLeave","default","style","backgroundColor","background","customClass","document","createElement","$el","__defProp$1","__getOwnPropSymbols$1","__hasOwnProp$1","__propIsEnum$1","__defNormalProp$1","__spreadValues$1","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","x","done","then","apply","defaults","body","lock","addStyle","instance","undefined","maskStyle","zIndex","String","nextZIndex","forEach","property","scroll","getBoundingClientRect","documentElement","keys","addClassList","Loading","querySelector","appendChild","createInstance","binding","textExr","spinnerExr","svgExr","svgViewBoxExr","backgroundExr","customClassExr","modifiers","vLoading","mounted","updated","oldValue","unmounted","_a","index","install","app","directive","config","globalProperties","$loading","service"],"mappings":"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","sourcesContent":["import { ref, reactive, toRefs, createVNode, render, h, Transition, withCtx, withDirectives, vShow, nextTick } from 'vue';\nimport { removeClass, getStyle, addClass } from '../utils/dom';\nimport PopupManager from '../utils/popup-manager';\nimport isServer from '../utils/isServer';\n\n/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\r\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction createLoadingComponent({\n  options,\n  globalLoadingOption\n}) {\n  let vm = null;\n  let afterLeaveTimer = null;\n  const afterLeaveFlag = ref(false);\n  const data = reactive(__spreadProps(__spreadValues({}, options), {\n    originalPosition: \"\",\n    originalOverflow: \"\",\n    visible: false\n  }));\n  function setText(text) {\n    data.text = text;\n  }\n  function destroySelf() {\n    const target = data.parent;\n    if (!target.vLoadingAddClassList) {\n      let loadingNumber = target.getAttribute(\"loading-number\");\n      loadingNumber = Number.parseInt(loadingNumber) - 1;\n      if (!loadingNumber) {\n        removeClass(target, \"el-loading-parent--relative\");\n        target.removeAttribute(\"loading-number\");\n      } else {\n        target.setAttribute(\"loading-number\", loadingNumber.toString());\n      }\n      removeClass(target, \"el-loading-parent--hidden\");\n    }\n    if (vm.el && vm.el.parentNode) {\n      vm.el.parentNode.removeChild(vm.el);\n    }\n  }\n  function close() {\n    const target = data.parent;\n    target.vLoadingAddClassList = null;\n    if (data.fullscreen) {\n      globalLoadingOption.fullscreenLoading = void 0;\n    }\n    afterLeaveFlag.value = true;\n    clearTimeout(afterLeaveTimer);\n    afterLeaveTimer = window.setTimeout(() => {\n      if (afterLeaveFlag.value) {\n        afterLeaveFlag.value = false;\n        destroySelf();\n      }\n    }, 400);\n    data.visible = false;\n  }\n  function handleAfterLeave() {\n    if (!afterLeaveFlag.value)\n      return;\n    afterLeaveFlag.value = false;\n    destroySelf();\n  }\n  const componentSetupConfig = __spreadProps(__spreadValues({}, toRefs(data)), {\n    setText,\n    close,\n    handleAfterLeave\n  });\n  const elLoadingComponent = {\n    name: \"ElLoading\",\n    setup() {\n      return componentSetupConfig;\n    },\n    render() {\n      const spinner = h(\"svg\", __spreadValues({\n        class: \"circular\",\n        viewBox: this.svgViewBox ? this.svgViewBox : \"25 25 50 50\"\n      }, this.svg ? { innerHTML: this.svg } : {}), [\n        h(\"circle\", { class: \"path\", cx: \"50\", cy: \"50\", r: \"20\", fill: \"none\" })\n      ]);\n      const noSpinner = h(\"i\", { class: this.spinner });\n      const spinnerText = h(\"p\", { class: \"el-loading-text\" }, [this.text]);\n      return h(Transition, {\n        name: \"el-loading-fade\",\n        onAfterLeave: this.handleAfterLeave\n      }, {\n        default: withCtx(() => [withDirectives(createVNode(\"div\", {\n          style: {\n            backgroundColor: this.background || \"\"\n          },\n          class: [\n            \"el-loading-mask\",\n            this.customClass,\n            this.fullscreen ? \"is-fullscreen\" : \"\"\n          ]\n        }, [\n          h(\"div\", {\n            class: \"el-loading-spinner\"\n          }, [\n            !this.spinner ? spinner : noSpinner,\n            this.text ? spinnerText : null\n          ])\n        ]), [[vShow, this.visible]])])\n      });\n    }\n  };\n  vm = createVNode(elLoadingComponent);\n  render(vm, document.createElement(\"div\"));\n  return __spreadProps(__spreadValues({}, componentSetupConfig), {\n    vm,\n    get $el() {\n      return vm.el;\n    }\n  });\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst defaults = {\n  parent: null,\n  background: \"\",\n  svg: null,\n  svgViewBox: null,\n  spinner: false,\n  text: null,\n  fullscreen: true,\n  body: false,\n  lock: false,\n  customClass: \"\"\n};\nconst globalLoadingOption = {\n  fullscreenLoading: null\n};\nconst addStyle = (options, parent, instance) => __async(undefined, null, function* () {\n  const maskStyle = {};\n  if (options.fullscreen) {\n    instance.originalPosition.value = getStyle(document.body, \"position\");\n    instance.originalOverflow.value = getStyle(document.body, \"overflow\");\n    maskStyle.zIndex = String(PopupManager.nextZIndex());\n  } else if (options.body) {\n    instance.originalPosition.value = getStyle(document.body, \"position\");\n    yield nextTick();\n    [\"top\", \"left\"].forEach((property) => {\n      const scroll = property === \"top\" ? \"scrollTop\" : \"scrollLeft\";\n      maskStyle[property] = options.target.getBoundingClientRect()[property] + document.body[scroll] + document.documentElement[scroll] - parseInt(getStyle(document.body, `margin-${property}`), 10) + \"px\";\n    });\n    [\"height\", \"width\"].forEach((property) => {\n      maskStyle[property] = options.target.getBoundingClientRect()[property] + \"px\";\n    });\n  } else {\n    instance.originalPosition.value = getStyle(parent, \"position\");\n  }\n  Object.keys(maskStyle).forEach((property) => {\n    instance.$el.style[property] = maskStyle[property];\n  });\n});\nconst addClassList = (options, parent, instance) => {\n  if (instance.originalPosition.value !== \"absolute\" && instance.originalPosition.value !== \"fixed\") {\n    addClass(parent, \"el-loading-parent--relative\");\n  } else {\n    removeClass(parent, \"el-loading-parent--relative\");\n  }\n  if (options.fullscreen && options.lock) {\n    addClass(parent, \"el-loading-parent--hidden\");\n  } else {\n    removeClass(parent, \"el-loading-parent--hidden\");\n  }\n};\nconst Loading = function(options = {}) {\n  if (isServer)\n    return;\n  options = __spreadValues$1(__spreadValues$1({}, defaults), options);\n  if (typeof options.target === \"string\") {\n    options.target = document.querySelector(options.target);\n  }\n  options.target = options.target || document.body;\n  if (options.target !== document.body) {\n    options.fullscreen = false;\n  } else {\n    options.body = true;\n  }\n  if (options.fullscreen && globalLoadingOption.fullscreenLoading) {\n    globalLoadingOption.fullscreenLoading.close();\n  }\n  const parent = options.body ? document.body : options.target;\n  options.parent = parent;\n  const instance = createLoadingComponent({\n    options,\n    globalLoadingOption\n  });\n  addStyle(options, parent, instance);\n  addClassList(options, parent, instance);\n  options.parent.vLoadingAddClassList = () => {\n    addClassList(options, parent, instance);\n  };\n  let loadingNumber = parent.getAttribute(\"loading-number\");\n  if (!loadingNumber) {\n    loadingNumber = 1;\n  } else {\n    loadingNumber = Number.parseInt(loadingNumber) + 1;\n  }\n  parent.setAttribute(\"loading-number\", loadingNumber.toString());\n  parent.appendChild(instance.$el);\n  nextTick().then(() => {\n    instance.visible.value = hasOwn(options, \"visible\") ? options.visible : true;\n  });\n  if (options.fullscreen) {\n    globalLoadingOption.fullscreenLoading = instance;\n  }\n  return instance;\n};\n\nconst createInstance = (el, binding) => {\n  const textExr = el.getAttribute(\"element-loading-text\");\n  const spinnerExr = el.getAttribute(\"element-loading-spinner\");\n  const svgExr = el.getAttribute(\"element-loading-svg\");\n  const svgViewBoxExr = el.getAttribute(\"element-loading-svg-view-box\");\n  const backgroundExr = el.getAttribute(\"element-loading-background\");\n  const customClassExr = el.getAttribute(\"element-loading-custom-class\");\n  const vm = binding.instance;\n  el.instance = Loading({\n    text: vm && vm[textExr] || textExr,\n    svg: vm && vm[svgExr] || svgExr,\n    svgViewBox: vm && vm[svgViewBoxExr] || svgViewBoxExr,\n    spinner: vm && vm[spinnerExr] || spinnerExr,\n    background: vm && vm[backgroundExr] || backgroundExr,\n    customClass: vm && vm[customClassExr] || customClassExr,\n    fullscreen: !!binding.modifiers.fullscreen,\n    target: !!binding.modifiers.fullscreen ? null : el,\n    body: !!binding.modifiers.body,\n    visible: true,\n    lock: !!binding.modifiers.lock\n  });\n};\nconst vLoading = {\n  mounted(el, binding) {\n    if (!!binding.value) {\n      createInstance(el, binding);\n    }\n  },\n  updated(el, binding) {\n    const instance = el.instance;\n    if (binding.oldValue !== binding.value) {\n      if (binding.value) {\n        createInstance(el, binding);\n      } else {\n        instance.close();\n      }\n    }\n  },\n  unmounted(el) {\n    var _a;\n    (_a = el == null ? void 0 : el.instance) == null ? void 0 : _a.close();\n  }\n};\n\nvar index = {\n  install(app) {\n    app.directive(\"loading\", vLoading);\n    app.config.globalProperties.$loading = Loading;\n  },\n  directive: vLoading,\n  service: Loading\n};\n\nexport default index;\n"]},"metadata":{},"sourceType":"module"}