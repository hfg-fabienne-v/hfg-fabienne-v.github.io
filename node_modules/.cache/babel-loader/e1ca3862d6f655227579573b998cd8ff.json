{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport { defineComponent, ref, computed, watch, nextTick, onMounted, openBlock, createBlock, Transition, withCtx, createVNode, withModifiers, createCommentVNode, Fragment, renderList, withDirectives, vShow } from 'vue';\nimport { isFirefox, rafThrottle } from '../utils/util';\nimport { on, off } from '../utils/dom';\nimport { EVENT_CODE } from '../utils/aria';\nimport { useLocaleInject } from '../hooks';\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  return a;\n};\n\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\n\nvar Mode = {\n  CONTAIN: {\n    name: \"contain\",\n    icon: \"el-icon-full-screen\"\n  },\n  ORIGINAL: {\n    name: \"original\",\n    icon: \"el-icon-c-scale-to-original\"\n  }\n};\nvar mousewheelEventName = isFirefox() ? \"DOMMouseScroll\" : \"mousewheel\";\nvar CLOSE_EVENT = \"close\";\nvar SWITCH_EVENT = \"switch\";\nvar script = defineComponent({\n  name: \"ElImageViewer\",\n  props: {\n    urlList: {\n      type: Array,\n      default: []\n    },\n    zIndex: {\n      type: Number,\n      default: 2e3\n    },\n    initialIndex: {\n      type: Number,\n      default: 0\n    },\n    infinite: {\n      type: Boolean,\n      default: true\n    },\n    hideOnClickModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [CLOSE_EVENT, SWITCH_EVENT],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n\n    var _useLocaleInject = useLocaleInject(),\n        t = _useLocaleInject.t;\n\n    var _keyDownHandler = null;\n    var _mouseWheelHandler = null;\n    var _dragHandler = null;\n    var loading = ref(true);\n    var index = ref(props.initialIndex);\n    var wrapper = ref(null);\n    var img = ref(null);\n    var mode = ref(Mode.CONTAIN);\n    var transform = ref({\n      scale: 1,\n      deg: 0,\n      offsetX: 0,\n      offsetY: 0,\n      enableTransition: false\n    });\n    var isSingle = computed(function () {\n      var urlList = props.urlList;\n      return urlList.length <= 1;\n    });\n    var isFirst = computed(function () {\n      return index.value === 0;\n    });\n    var isLast = computed(function () {\n      return index.value === props.urlList.length - 1;\n    });\n    var currentImg = computed(function () {\n      return props.urlList[index.value];\n    });\n    var imgStyle = computed(function () {\n      var _transform$value = transform.value,\n          scale = _transform$value.scale,\n          deg = _transform$value.deg,\n          offsetX = _transform$value.offsetX,\n          offsetY = _transform$value.offsetY,\n          enableTransition = _transform$value.enableTransition;\n      var style = {\n        transform: \"scale(\".concat(scale, \") rotate(\").concat(deg, \"deg)\"),\n        transition: enableTransition ? \"transform .3s\" : \"\",\n        marginLeft: \"\".concat(offsetX, \"px\"),\n        marginTop: \"\".concat(offsetY, \"px\")\n      };\n\n      if (mode.value.name === Mode.CONTAIN.name) {\n        style.maxWidth = style.maxHeight = \"100%\";\n      }\n\n      return style;\n    });\n\n    function hide() {\n      deviceSupportUninstall();\n      emit(CLOSE_EVENT);\n    }\n\n    function deviceSupportInstall() {\n      _keyDownHandler = rafThrottle(function (e) {\n        switch (e.code) {\n          case EVENT_CODE.esc:\n            hide();\n            break;\n\n          case EVENT_CODE.space:\n            toggleMode();\n            break;\n\n          case EVENT_CODE.left:\n            prev();\n            break;\n\n          case EVENT_CODE.up:\n            handleActions(\"zoomIn\");\n            break;\n\n          case EVENT_CODE.right:\n            next();\n            break;\n\n          case EVENT_CODE.down:\n            handleActions(\"zoomOut\");\n            break;\n        }\n      });\n      _mouseWheelHandler = rafThrottle(function (e) {\n        var delta = e.wheelDelta ? e.wheelDelta : -e.detail;\n\n        if (delta > 0) {\n          handleActions(\"zoomIn\", {\n            zoomRate: 0.015,\n            enableTransition: false\n          });\n        } else {\n          handleActions(\"zoomOut\", {\n            zoomRate: 0.015,\n            enableTransition: false\n          });\n        }\n      });\n      on(document, \"keydown\", _keyDownHandler);\n      on(document, mousewheelEventName, _mouseWheelHandler);\n    }\n\n    function deviceSupportUninstall() {\n      off(document, \"keydown\", _keyDownHandler);\n      off(document, mousewheelEventName, _mouseWheelHandler);\n      _keyDownHandler = null;\n      _mouseWheelHandler = null;\n    }\n\n    function handleImgLoad() {\n      loading.value = false;\n    }\n\n    function handleImgError(e) {\n      loading.value = false;\n      e.target.alt = t(\"el.image.error\");\n    }\n\n    function handleMouseDown(e) {\n      if (loading.value || e.button !== 0) return;\n      var _transform$value2 = transform.value,\n          offsetX = _transform$value2.offsetX,\n          offsetY = _transform$value2.offsetY;\n      var startX = e.pageX;\n      var startY = e.pageY;\n      _dragHandler = rafThrottle(function (ev) {\n        transform.value = __spreadProps(__spreadValues({}, transform.value), {\n          offsetX: offsetX + ev.pageX - startX,\n          offsetY: offsetY + ev.pageY - startY\n        });\n      });\n      on(document, \"mousemove\", _dragHandler);\n      on(document, \"mouseup\", function () {\n        off(document, \"mousemove\", _dragHandler);\n      });\n      e.preventDefault();\n    }\n\n    function reset() {\n      transform.value = {\n        scale: 1,\n        deg: 0,\n        offsetX: 0,\n        offsetY: 0,\n        enableTransition: false\n      };\n    }\n\n    function toggleMode() {\n      if (loading.value) return;\n      var modeNames = Object.keys(Mode);\n      var modeValues = Object.values(Mode);\n      var currentMode = mode.value.name;\n      var index2 = modeValues.findIndex(function (i) {\n        return i.name === currentMode;\n      });\n      var nextIndex = (index2 + 1) % modeNames.length;\n      mode.value = Mode[modeNames[nextIndex]];\n      reset();\n    }\n\n    function prev() {\n      if (isFirst.value && !props.infinite) return;\n      var len = props.urlList.length;\n      index.value = (index.value - 1 + len) % len;\n    }\n\n    function next() {\n      if (isLast.value && !props.infinite) return;\n      var len = props.urlList.length;\n      index.value = (index.value + 1) % len;\n    }\n\n    function handleActions(action) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (loading.value) return;\n\n      var _spreadValues = __spreadValues({\n        zoomRate: 0.2,\n        rotateDeg: 90,\n        enableTransition: true\n      }, options),\n          zoomRate = _spreadValues.zoomRate,\n          rotateDeg = _spreadValues.rotateDeg,\n          enableTransition = _spreadValues.enableTransition;\n\n      switch (action) {\n        case \"zoomOut\":\n          if (transform.value.scale > 0.2) {\n            transform.value.scale = parseFloat((transform.value.scale - zoomRate).toFixed(3));\n          }\n\n          break;\n\n        case \"zoomIn\":\n          transform.value.scale = parseFloat((transform.value.scale + zoomRate).toFixed(3));\n          break;\n\n        case \"clocelise\":\n          transform.value.deg += rotateDeg;\n          break;\n\n        case \"anticlocelise\":\n          transform.value.deg -= rotateDeg;\n          break;\n      }\n\n      transform.value.enableTransition = enableTransition;\n    }\n\n    watch(currentImg, function () {\n      nextTick(function () {\n        var $img = img.value;\n\n        if (!$img.complete) {\n          loading.value = true;\n        }\n      });\n    });\n    watch(index, function (val) {\n      reset();\n      emit(SWITCH_EVENT, val);\n    });\n    onMounted(function () {\n      var _a, _b;\n\n      deviceSupportInstall();\n      (_b = (_a = wrapper.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    });\n    return {\n      index: index,\n      wrapper: wrapper,\n      img: img,\n      isSingle: isSingle,\n      isFirst: isFirst,\n      isLast: isLast,\n      currentImg: currentImg,\n      imgStyle: imgStyle,\n      mode: mode,\n      handleActions: handleActions,\n      prev: prev,\n      next: next,\n      hide: hide,\n      toggleMode: toggleMode,\n      handleImgLoad: handleImgLoad,\n      handleImgError: handleImgError,\n      handleMouseDown: handleMouseDown\n    };\n  }\n});\n\nvar _hoisted_1 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-close\"\n}, null, -1);\n\nvar _hoisted_2 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-arrow-left\"\n}, null, -1);\n\nvar _hoisted_3 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-arrow-right\"\n}, null, -1);\n\nvar _hoisted_4 = {\n  class: \"el-image-viewer__btn el-image-viewer__actions\"\n};\nvar _hoisted_5 = {\n  class: \"el-image-viewer__actions__inner\"\n};\n\nvar _hoisted_6 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-image-viewer__actions__divider\"\n}, null, -1);\n\nvar _hoisted_7 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-image-viewer__actions__divider\"\n}, null, -1);\n\nvar _hoisted_8 = {\n  class: \"el-image-viewer__canvas\"\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(Transition, {\n    name: \"viewer-fade\"\n  }, {\n    default: withCtx(function () {\n      return [createVNode(\"div\", {\n        ref: \"wrapper\",\n        tabindex: -1,\n        class: \"el-image-viewer__wrapper\",\n        style: {\n          zIndex: _ctx.zIndex\n        }\n      }, [createVNode(\"div\", {\n        class: \"el-image-viewer__mask\",\n        onClick: _cache[1] || (_cache[1] = withModifiers(function ($event) {\n          return _ctx.hideOnClickModal && _ctx.hide();\n        }, [\"self\"]))\n      }), createCommentVNode(\" CLOSE \"), createVNode(\"span\", {\n        class: \"el-image-viewer__btn el-image-viewer__close\",\n        onClick: _cache[2] || (_cache[2] = function () {\n          return _ctx.hide && _ctx.hide.apply(_ctx, arguments);\n        })\n      }, [_hoisted_1]), createCommentVNode(\" ARROW \"), !_ctx.isSingle ? (openBlock(), createBlock(Fragment, {\n        key: 0\n      }, [createVNode(\"span\", {\n        class: [\"el-image-viewer__btn el-image-viewer__prev\", {\n          \"is-disabled\": !_ctx.infinite && _ctx.isFirst\n        }],\n        onClick: _cache[3] || (_cache[3] = function () {\n          return _ctx.prev && _ctx.prev.apply(_ctx, arguments);\n        })\n      }, [_hoisted_2], 2), createVNode(\"span\", {\n        class: [\"el-image-viewer__btn el-image-viewer__next\", {\n          \"is-disabled\": !_ctx.infinite && _ctx.isLast\n        }],\n        onClick: _cache[4] || (_cache[4] = function () {\n          return _ctx.next && _ctx.next.apply(_ctx, arguments);\n        })\n      }, [_hoisted_3], 2)], 64)) : createCommentVNode(\"v-if\", true), createCommentVNode(\" ACTIONS \"), createVNode(\"div\", _hoisted_4, [createVNode(\"div\", _hoisted_5, [createVNode(\"i\", {\n        class: \"el-icon-zoom-out\",\n        onClick: _cache[5] || (_cache[5] = function ($event) {\n          return _ctx.handleActions(\"zoomOut\");\n        })\n      }), createVNode(\"i\", {\n        class: \"el-icon-zoom-in\",\n        onClick: _cache[6] || (_cache[6] = function ($event) {\n          return _ctx.handleActions(\"zoomIn\");\n        })\n      }), _hoisted_6, createVNode(\"i\", {\n        class: _ctx.mode.icon,\n        onClick: _cache[7] || (_cache[7] = function () {\n          return _ctx.toggleMode && _ctx.toggleMode.apply(_ctx, arguments);\n        })\n      }, null, 2), _hoisted_7, createVNode(\"i\", {\n        class: \"el-icon-refresh-left\",\n        onClick: _cache[8] || (_cache[8] = function ($event) {\n          return _ctx.handleActions(\"anticlocelise\");\n        })\n      }), createVNode(\"i\", {\n        class: \"el-icon-refresh-right\",\n        onClick: _cache[9] || (_cache[9] = function ($event) {\n          return _ctx.handleActions(\"clocelise\");\n        })\n      })])]), createCommentVNode(\" CANVAS \"), createVNode(\"div\", _hoisted_8, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.urlList, function (url, i) {\n        return withDirectives((openBlock(), createBlock(\"img\", {\n          ref: \"img\",\n          key: url,\n          src: url,\n          style: _ctx.imgStyle,\n          class: \"el-image-viewer__img\",\n          onLoad: _cache[10] || (_cache[10] = function () {\n            return _ctx.handleImgLoad && _ctx.handleImgLoad.apply(_ctx, arguments);\n          }),\n          onError: _cache[11] || (_cache[11] = function () {\n            return _ctx.handleImgError && _ctx.handleImgError.apply(_ctx, arguments);\n          }),\n          onMousedown: _cache[12] || (_cache[12] = function () {\n            return _ctx.handleMouseDown && _ctx.handleMouseDown.apply(_ctx, arguments);\n          })\n        }, null, 44, [\"src\"])), [[vShow, i === _ctx.index]]);\n      }), 128))])], 4)];\n    }),\n    _: 1\n  });\n}\n\nscript.render = render;\nscript.__file = \"packages/image-viewer/src/index.vue\";\n\nscript.install = function (app) {\n  app.component(script.name, script);\n};\n\nvar _ImageViewer = script;\nexport default _ImageViewer;","map":{"version":3,"sources":["/Users/fabienne/studium/praxissemester/portfolio/fabienne.vatter/node_modules/element-plus/es/el-image-viewer/index.js"],"names":["defineComponent","ref","computed","watch","nextTick","onMounted","openBlock","createBlock","Transition","withCtx","createVNode","withModifiers","createCommentVNode","Fragment","renderList","withDirectives","vShow","isFirefox","rafThrottle","on","off","EVENT_CODE","useLocaleInject","__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","Mode","CONTAIN","name","icon","ORIGINAL","mousewheelEventName","CLOSE_EVENT","SWITCH_EVENT","script","props","urlList","type","Array","default","zIndex","Number","initialIndex","infinite","Boolean","hideOnClickModal","emits","setup","emit","t","_keyDownHandler","_mouseWheelHandler","_dragHandler","loading","index","wrapper","img","mode","transform","scale","deg","offsetX","offsetY","enableTransition","isSingle","length","isFirst","isLast","currentImg","imgStyle","style","transition","marginLeft","marginTop","maxWidth","maxHeight","hide","deviceSupportUninstall","deviceSupportInstall","e","code","esc","space","toggleMode","left","prev","up","handleActions","right","next","down","delta","wheelDelta","detail","zoomRate","document","handleImgLoad","handleImgError","target","alt","handleMouseDown","button","startX","pageX","startY","pageY","ev","preventDefault","reset","modeNames","keys","modeValues","values","currentMode","index2","findIndex","i","nextIndex","len","action","options","rotateDeg","parseFloat","toFixed","$img","complete","val","_a","_b","focus","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","render","_ctx","_cache","$props","$setup","$data","$options","tabindex","onClick","$event","url","src","onLoad","onError","onMousedown","_","__file","install","app","component","_ImageViewer"],"mappings":"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","sourcesContent":["import { defineComponent, ref, computed, watch, nextTick, onMounted, openBlock, createBlock, Transition, withCtx, createVNode, withModifiers, createCommentVNode, Fragment, renderList, withDirectives, vShow } from 'vue';\nimport { isFirefox, rafThrottle } from '../utils/util';\nimport { on, off } from '../utils/dom';\nimport { EVENT_CODE } from '../utils/aria';\nimport { useLocaleInject } from '../hooks';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst Mode = {\n  CONTAIN: {\n    name: \"contain\",\n    icon: \"el-icon-full-screen\"\n  },\n  ORIGINAL: {\n    name: \"original\",\n    icon: \"el-icon-c-scale-to-original\"\n  }\n};\nconst mousewheelEventName = isFirefox() ? \"DOMMouseScroll\" : \"mousewheel\";\nconst CLOSE_EVENT = \"close\";\nconst SWITCH_EVENT = \"switch\";\nvar script = defineComponent({\n  name: \"ElImageViewer\",\n  props: {\n    urlList: {\n      type: Array,\n      default: []\n    },\n    zIndex: {\n      type: Number,\n      default: 2e3\n    },\n    initialIndex: {\n      type: Number,\n      default: 0\n    },\n    infinite: {\n      type: Boolean,\n      default: true\n    },\n    hideOnClickModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [CLOSE_EVENT, SWITCH_EVENT],\n  setup(props, { emit }) {\n    const { t } = useLocaleInject();\n    let _keyDownHandler = null;\n    let _mouseWheelHandler = null;\n    let _dragHandler = null;\n    const loading = ref(true);\n    const index = ref(props.initialIndex);\n    const wrapper = ref(null);\n    const img = ref(null);\n    const mode = ref(Mode.CONTAIN);\n    let transform = ref({\n      scale: 1,\n      deg: 0,\n      offsetX: 0,\n      offsetY: 0,\n      enableTransition: false\n    });\n    const isSingle = computed(() => {\n      const { urlList } = props;\n      return urlList.length <= 1;\n    });\n    const isFirst = computed(() => {\n      return index.value === 0;\n    });\n    const isLast = computed(() => {\n      return index.value === props.urlList.length - 1;\n    });\n    const currentImg = computed(() => {\n      return props.urlList[index.value];\n    });\n    const imgStyle = computed(() => {\n      const { scale, deg, offsetX, offsetY, enableTransition } = transform.value;\n      const style = {\n        transform: `scale(${scale}) rotate(${deg}deg)`,\n        transition: enableTransition ? \"transform .3s\" : \"\",\n        marginLeft: `${offsetX}px`,\n        marginTop: `${offsetY}px`\n      };\n      if (mode.value.name === Mode.CONTAIN.name) {\n        style.maxWidth = style.maxHeight = \"100%\";\n      }\n      return style;\n    });\n    function hide() {\n      deviceSupportUninstall();\n      emit(CLOSE_EVENT);\n    }\n    function deviceSupportInstall() {\n      _keyDownHandler = rafThrottle((e) => {\n        switch (e.code) {\n          case EVENT_CODE.esc:\n            hide();\n            break;\n          case EVENT_CODE.space:\n            toggleMode();\n            break;\n          case EVENT_CODE.left:\n            prev();\n            break;\n          case EVENT_CODE.up:\n            handleActions(\"zoomIn\");\n            break;\n          case EVENT_CODE.right:\n            next();\n            break;\n          case EVENT_CODE.down:\n            handleActions(\"zoomOut\");\n            break;\n        }\n      });\n      _mouseWheelHandler = rafThrottle((e) => {\n        const delta = e.wheelDelta ? e.wheelDelta : -e.detail;\n        if (delta > 0) {\n          handleActions(\"zoomIn\", {\n            zoomRate: 0.015,\n            enableTransition: false\n          });\n        } else {\n          handleActions(\"zoomOut\", {\n            zoomRate: 0.015,\n            enableTransition: false\n          });\n        }\n      });\n      on(document, \"keydown\", _keyDownHandler);\n      on(document, mousewheelEventName, _mouseWheelHandler);\n    }\n    function deviceSupportUninstall() {\n      off(document, \"keydown\", _keyDownHandler);\n      off(document, mousewheelEventName, _mouseWheelHandler);\n      _keyDownHandler = null;\n      _mouseWheelHandler = null;\n    }\n    function handleImgLoad() {\n      loading.value = false;\n    }\n    function handleImgError(e) {\n      loading.value = false;\n      e.target.alt = t(\"el.image.error\");\n    }\n    function handleMouseDown(e) {\n      if (loading.value || e.button !== 0)\n        return;\n      const { offsetX, offsetY } = transform.value;\n      const startX = e.pageX;\n      const startY = e.pageY;\n      _dragHandler = rafThrottle((ev) => {\n        transform.value = __spreadProps(__spreadValues({}, transform.value), {\n          offsetX: offsetX + ev.pageX - startX,\n          offsetY: offsetY + ev.pageY - startY\n        });\n      });\n      on(document, \"mousemove\", _dragHandler);\n      on(document, \"mouseup\", () => {\n        off(document, \"mousemove\", _dragHandler);\n      });\n      e.preventDefault();\n    }\n    function reset() {\n      transform.value = {\n        scale: 1,\n        deg: 0,\n        offsetX: 0,\n        offsetY: 0,\n        enableTransition: false\n      };\n    }\n    function toggleMode() {\n      if (loading.value)\n        return;\n      const modeNames = Object.keys(Mode);\n      const modeValues = Object.values(Mode);\n      const currentMode = mode.value.name;\n      const index2 = modeValues.findIndex((i) => i.name === currentMode);\n      const nextIndex = (index2 + 1) % modeNames.length;\n      mode.value = Mode[modeNames[nextIndex]];\n      reset();\n    }\n    function prev() {\n      if (isFirst.value && !props.infinite)\n        return;\n      const len = props.urlList.length;\n      index.value = (index.value - 1 + len) % len;\n    }\n    function next() {\n      if (isLast.value && !props.infinite)\n        return;\n      const len = props.urlList.length;\n      index.value = (index.value + 1) % len;\n    }\n    function handleActions(action, options = {}) {\n      if (loading.value)\n        return;\n      const { zoomRate, rotateDeg, enableTransition } = __spreadValues({\n        zoomRate: 0.2,\n        rotateDeg: 90,\n        enableTransition: true\n      }, options);\n      switch (action) {\n        case \"zoomOut\":\n          if (transform.value.scale > 0.2) {\n            transform.value.scale = parseFloat((transform.value.scale - zoomRate).toFixed(3));\n          }\n          break;\n        case \"zoomIn\":\n          transform.value.scale = parseFloat((transform.value.scale + zoomRate).toFixed(3));\n          break;\n        case \"clocelise\":\n          transform.value.deg += rotateDeg;\n          break;\n        case \"anticlocelise\":\n          transform.value.deg -= rotateDeg;\n          break;\n      }\n      transform.value.enableTransition = enableTransition;\n    }\n    watch(currentImg, () => {\n      nextTick(() => {\n        const $img = img.value;\n        if (!$img.complete) {\n          loading.value = true;\n        }\n      });\n    });\n    watch(index, (val) => {\n      reset();\n      emit(SWITCH_EVENT, val);\n    });\n    onMounted(() => {\n      var _a, _b;\n      deviceSupportInstall();\n      (_b = (_a = wrapper.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    });\n    return {\n      index,\n      wrapper,\n      img,\n      isSingle,\n      isFirst,\n      isLast,\n      currentImg,\n      imgStyle,\n      mode,\n      handleActions,\n      prev,\n      next,\n      hide,\n      toggleMode,\n      handleImgLoad,\n      handleImgError,\n      handleMouseDown\n    };\n  }\n});\n\nconst _hoisted_1 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-close\" }, null, -1);\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-arrow-left\" }, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-arrow-right\" }, null, -1);\nconst _hoisted_4 = { class: \"el-image-viewer__btn el-image-viewer__actions\" };\nconst _hoisted_5 = { class: \"el-image-viewer__actions__inner\" };\nconst _hoisted_6 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-image-viewer__actions__divider\" }, null, -1);\nconst _hoisted_7 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-image-viewer__actions__divider\" }, null, -1);\nconst _hoisted_8 = { class: \"el-image-viewer__canvas\" };\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(Transition, { name: \"viewer-fade\" }, {\n    default: withCtx(() => [\n      createVNode(\"div\", {\n        ref: \"wrapper\",\n        tabindex: -1,\n        class: \"el-image-viewer__wrapper\",\n        style: { zIndex: _ctx.zIndex }\n      }, [\n        createVNode(\"div\", {\n          class: \"el-image-viewer__mask\",\n          onClick: _cache[1] || (_cache[1] = withModifiers(($event) => _ctx.hideOnClickModal && _ctx.hide(), [\"self\"]))\n        }),\n        createCommentVNode(\" CLOSE \"),\n        createVNode(\"span\", {\n          class: \"el-image-viewer__btn el-image-viewer__close\",\n          onClick: _cache[2] || (_cache[2] = (...args) => _ctx.hide && _ctx.hide(...args))\n        }, [\n          _hoisted_1\n        ]),\n        createCommentVNode(\" ARROW \"),\n        !_ctx.isSingle ? (openBlock(), createBlock(Fragment, { key: 0 }, [\n          createVNode(\"span\", {\n            class: [\"el-image-viewer__btn el-image-viewer__prev\", { \"is-disabled\": !_ctx.infinite && _ctx.isFirst }],\n            onClick: _cache[3] || (_cache[3] = (...args) => _ctx.prev && _ctx.prev(...args))\n          }, [\n            _hoisted_2\n          ], 2),\n          createVNode(\"span\", {\n            class: [\"el-image-viewer__btn el-image-viewer__next\", { \"is-disabled\": !_ctx.infinite && _ctx.isLast }],\n            onClick: _cache[4] || (_cache[4] = (...args) => _ctx.next && _ctx.next(...args))\n          }, [\n            _hoisted_3\n          ], 2)\n        ], 64)) : createCommentVNode(\"v-if\", true),\n        createCommentVNode(\" ACTIONS \"),\n        createVNode(\"div\", _hoisted_4, [\n          createVNode(\"div\", _hoisted_5, [\n            createVNode(\"i\", {\n              class: \"el-icon-zoom-out\",\n              onClick: _cache[5] || (_cache[5] = ($event) => _ctx.handleActions(\"zoomOut\"))\n            }),\n            createVNode(\"i\", {\n              class: \"el-icon-zoom-in\",\n              onClick: _cache[6] || (_cache[6] = ($event) => _ctx.handleActions(\"zoomIn\"))\n            }),\n            _hoisted_6,\n            createVNode(\"i\", {\n              class: _ctx.mode.icon,\n              onClick: _cache[7] || (_cache[7] = (...args) => _ctx.toggleMode && _ctx.toggleMode(...args))\n            }, null, 2),\n            _hoisted_7,\n            createVNode(\"i\", {\n              class: \"el-icon-refresh-left\",\n              onClick: _cache[8] || (_cache[8] = ($event) => _ctx.handleActions(\"anticlocelise\"))\n            }),\n            createVNode(\"i\", {\n              class: \"el-icon-refresh-right\",\n              onClick: _cache[9] || (_cache[9] = ($event) => _ctx.handleActions(\"clocelise\"))\n            })\n          ])\n        ]),\n        createCommentVNode(\" CANVAS \"),\n        createVNode(\"div\", _hoisted_8, [\n          (openBlock(true), createBlock(Fragment, null, renderList(_ctx.urlList, (url, i) => {\n            return withDirectives((openBlock(), createBlock(\"img\", {\n              ref: \"img\",\n              key: url,\n              src: url,\n              style: _ctx.imgStyle,\n              class: \"el-image-viewer__img\",\n              onLoad: _cache[10] || (_cache[10] = (...args) => _ctx.handleImgLoad && _ctx.handleImgLoad(...args)),\n              onError: _cache[11] || (_cache[11] = (...args) => _ctx.handleImgError && _ctx.handleImgError(...args)),\n              onMousedown: _cache[12] || (_cache[12] = (...args) => _ctx.handleMouseDown && _ctx.handleMouseDown(...args))\n            }, null, 44, [\"src\"])), [\n              [vShow, i === _ctx.index]\n            ]);\n          }), 128))\n        ])\n      ], 4)\n    ]),\n    _: 1\n  });\n}\n\nscript.render = render;\nscript.__file = \"packages/image-viewer/src/index.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _ImageViewer = script;\n\nexport default _ImageViewer;\n"]},"metadata":{},"sourceType":"module"}